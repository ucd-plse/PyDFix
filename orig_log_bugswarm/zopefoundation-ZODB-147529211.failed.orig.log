Using worker: worker-linux-docker-b950d041.prod.travis-ci.org:travis-linux-15

travis_fold:start:system_info[0K[33;1mBuild system information[0m
Build language: python
Build group: stable
Build dist: precise
Build id: 147529205
Job id: 147529211
travis-build version: ad83e8722
[34m[1mBuild image provisioning date and time[0m
Thu Feb  5 15:09:33 UTC 2015
[34m[1mOperating System Details[0m
Distributor ID:	Ubuntu
Description:	Ubuntu 12.04.5 LTS
Release:	12.04
Codename:	precise
[34m[1mLinux Version[0m
3.13.0-29-generic
[34m[1mCookbooks Version[0m
a68419e https://github.com/travis-ci/travis-cookbooks/tree/a68419e
[34m[1mGCC version[0m
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

[34m[1mLLVM version[0m
clang version 3.4 (tags/RELEASE_34/final)
Target: x86_64-unknown-linux-gnu
Thread model: posix
[34m[1mPre-installed Ruby versions[0m
ruby-1.9.3-p551
[34m[1mPre-installed Node.js versions[0m
v0.10.36
[34m[1mPre-installed Go versions[0m
1.4.1
[34m[1mRedis version[0m
redis-server 2.8.19
[34m[1mriak version[0m
2.0.2
[34m[1mMongoDB version[0m
MongoDB 2.4.12
[34m[1mCouchDB version[0m
couchdb 1.6.1
[34m[1mNeo4j version[0m
1.9.4
[34m[1mRabbitMQ Version[0m
3.4.3
[34m[1mElasticSearch version[0m
1.4.0
[34m[1mInstalled Sphinx versions[0m
2.0.10
2.1.9
2.2.6
[34m[1mDefault Sphinx version[0m
2.2.6
[34m[1mInstalled Firefox version[0m
firefox 31.0esr
[34m[1mPhantomJS version[0m
1.9.8
[34m[1mant -version[0m
Apache Ant(TM) version 1.8.2 compiled on December 3 2011
[34m[1mmvn -version[0m
Apache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T17:29:23+00:00)
Maven home: /usr/local/maven
Java version: 1.7.0_76, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-7-oracle/jre
Default locale: en_US, platform encoding: ANSI_X3.4-1968
OS name: "linux", version: "3.13.0-29-generic", arch: "amd64", family: "unix"
travis_fold:end:system_info[0K
travis_fold:start:fix.CVE-2015-7547[0K$ export DEBIAN_FRONTEND=noninteractive
W: Size of file /var/lib/apt/lists/ppa.launchpad.net_ubuntugis_ppa_ubuntu_dists_precise_main_binary-amd64_Packages.gz is not what the server reported 36669 36677
W: Size of file /var/lib/apt/lists/ppa.launchpad.net_ubuntugis_ppa_ubuntu_dists_precise_main_binary-i386_Packages.gz is not what the server reported 36729 36733
W: Size of file /var/lib/apt/lists/us.archive.ubuntu.com_ubuntu_dists_precise-backports_multiverse_source_Sources.gz is not what the server reported 5886 5888
Reading package lists...
Building dependency tree...
Reading state information...
The following extra packages will be installed:
  libc-bin libc-dev-bin libc6-dev
Suggested packages:
  glibc-doc
The following packages will be upgraded:
  libc-bin libc-dev-bin libc6 libc6-dev
4 upgraded, 0 newly installed, 0 to remove and 239 not upgraded.
Need to get 8,840 kB of archives.
After this operation, 14.3 kB disk space will be freed.
Get:1 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc6-dev amd64 2.15-0ubuntu10.15 [2,943 kB]
Get:2 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc-dev-bin amd64 2.15-0ubuntu10.15 [84.7 kB]
Get:3 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc-bin amd64 2.15-0ubuntu10.15 [1,177 kB]
Get:4 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc6 amd64 2.15-0ubuntu10.15 [4,636 kB]
Fetched 8,840 kB in 0s (26.2 MB/s)
Preconfiguring packages ...
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 72431 files and directories currently installed.)
Preparing to replace libc6-dev 2.15-0ubuntu10.10 (using .../libc6-dev_2.15-0ubuntu10.15_amd64.deb) ...
Unpacking replacement libc6-dev ...
Preparing to replace libc-dev-bin 2.15-0ubuntu10.10 (using .../libc-dev-bin_2.15-0ubuntu10.15_amd64.deb) ...
Unpacking replacement libc-dev-bin ...
Preparing to replace libc-bin 2.15-0ubuntu10.10 (using .../libc-bin_2.15-0ubuntu10.15_amd64.deb) ...
Unpacking replacement libc-bin ...
Processing triggers for man-db ...
Setting up libc-bin (2.15-0ubuntu10.15) ...
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 72430 files and directories currently installed.)
Preparing to replace libc6 2.15-0ubuntu10.10 (using .../libc6_2.15-0ubuntu10.15_amd64.deb) ...
Unpacking replacement libc6 ...
Setting up libc6 (2.15-0ubuntu10.15) ...
Setting up libc-dev-bin (2.15-0ubuntu10.15) ...
Setting up libc6-dev (2.15-0ubuntu10.15) ...
Processing triggers for libc-bin ...
ldconfig deferred processing now taking place
travis_fold:end:fix.CVE-2015-7547[0K[33;1m3.5 is not installed; attempting download[0m
rm: cannot remove `3.5.tar.bz2': No such file or directory
travis_fold:start:git.checkout[0Ktravis_time:start:1af7ea0e[0K$ git clone --depth=50 --branch=multi-commit-FileStorage https://github.com/zopefoundation/ZODB.git zopefoundation/ZODB
Cloning into 'zopefoundation/ZODB'...
remote: Counting objects: 1169, done.[K
remote: Compressing objects:   0% (1/511)   [Kremote: Compressing objects:   1% (6/511)   [Kremote: Compressing objects:   2% (11/511)   [Kremote: Compressing objects:   3% (16/511)   [Kremote: Compressing objects:   4% (21/511)   [Kremote: Compressing objects:   5% (26/511)   [Kremote: Compressing objects:   6% (31/511)   [Kremote: Compressing objects:   7% (36/511)   [Kremote: Compressing objects:   8% (41/511)   [Kremote: Compressing objects:   9% (46/511)   [Kremote: Compressing objects:  10% (52/511)   [Kremote: Compressing objects:  11% (57/511)   [Kremote: Compressing objects:  12% (62/511)   [Kremote: Compressing objects:  13% (67/511)   [Kremote: Compressing objects:  14% (72/511)   [Kremote: Compressing objects:  15% (77/511)   [Kremote: Compressing objects:  16% (82/511)   [Kremote: Compressing objects:  17% (87/511)   [Kremote: Compressing objects:  18% (92/511)   [Kremote: Compressing objects:  19% (98/511)   [Kremote: Compressing objects:  20% (103/511)   [Kremote: Compressing objects:  21% (108/511)   [Kremote: Compressing objects:  22% (113/511)   [Kremote: Compressing objects:  23% (118/511)   [Kremote: Compressing objects:  24% (123/511)   [Kremote: Compressing objects:  25% (128/511)   [Kremote: Compressing objects:  26% (133/511)   [Kremote: Compressing objects:  27% (138/511)   [Kremote: Compressing objects:  28% (144/511)   [Kremote: Compressing objects:  29% (149/511)   [Kremote: Compressing objects:  30% (154/511)   [Kremote: Compressing objects:  31% (159/511)   [Kremote: Compressing objects:  32% (164/511)   [Kremote: Compressing objects:  33% (169/511)   [Kremote: Compressing objects:  34% (174/511)   [Kremote: Compressing objects:  35% (179/511)   [Kremote: Compressing objects:  36% (184/511)   [Kremote: Compressing objects:  37% (190/511)   [Kremote: Compressing objects:  38% (195/511)   [Kremote: Compressing objects:  39% (200/511)   [Kremote: Compressing objects:  40% (205/511)   [Kremote: Compressing objects:  41% (210/511)   [Kremote: Compressing objects:  42% (215/511)   [Kremote: Compressing objects:  43% (220/511)   [Kremote: Compressing objects:  44% (225/511)   [Kremote: Compressing objects:  45% (230/511)   [Kremote: Compressing objects:  46% (236/511)   [Kremote: Compressing objects:  47% (241/511)   [Kremote: Compressing objects:  48% (246/511)   [Kremote: Compressing objects:  49% (251/511)   [Kremote: Compressing objects:  50% (256/511)   [Kremote: Compressing objects:  51% (261/511)   [Kremote: Compressing objects:  52% (266/511)   [Kremote: Compressing objects:  53% (271/511)   [Kremote: Compressing objects:  54% (276/511)   [Kremote: Compressing objects:  55% (282/511)   [Kremote: Compressing objects:  56% (287/511)   [Kremote: Compressing objects:  57% (292/511)   [Kremote: Compressing objects:  58% (297/511)   [Kremote: Compressing objects:  59% (302/511)   [Kremote: Compressing objects:  60% (307/511)   [Kremote: Compressing objects:  61% (312/511)   [Kremote: Compressing objects:  62% (317/511)   [Kremote: Compressing objects:  63% (322/511)   [Kremote: Compressing objects:  64% (328/511)   [Kremote: Compressing objects:  65% (333/511)   [Kremote: Compressing objects:  66% (338/511)   [Kremote: Compressing objects:  67% (343/511)   [Kremote: Compressing objects:  68% (348/511)   [Kremote: Compressing objects:  69% (353/511)   [Kremote: Compressing objects:  70% (358/511)   [Kremote: Compressing objects:  71% (363/511)   [Kremote: Compressing objects:  72% (368/511)   [Kremote: Compressing objects:  73% (374/511)   [Kremote: Compressing objects:  74% (379/511)   [Kremote: Compressing objects:  75% (384/511)   [Kremote: Compressing objects:  76% (389/511)   [Kremote: Compressing objects:  77% (394/511)   [Kremote: Compressing objects:  78% (399/511)   [Kremote: Compressing objects:  79% (404/511)   [Kremote: Compressing objects:  80% (409/511)   [Kremote: Compressing objects:  81% (414/511)   [Kremote: Compressing objects:  82% (420/511)   [Kremote: Compressing objects:  83% (425/511)   [Kremote: Compressing objects:  84% (430/511)   [Kremote: Compressing objects:  85% (435/511)   [Kremote: Compressing objects:  86% (440/511)   [Kremote: Compressing objects:  87% (445/511)   [Kremote: Compressing objects:  88% (450/511)   [Kremote: Compressing objects:  89% (455/511)   [Kremote: Compressing objects:  90% (460/511)   [Kremote: Compressing objects:  91% (466/511)   [Kremote: Compressing objects:  92% (471/511)   [Kremote: Compressing objects:  93% (476/511)   [Kremote: Compressing objects:  94% (481/511)   [Kremote: Compressing objects:  95% (486/511)   [Kremote: Compressing objects:  96% (491/511)   [Kremote: Compressing objects:  97% (496/511)   [Kremote: Compressing objects:  98% (501/511)   [Kremote: Compressing objects:  99% (506/511)   [Kremote: Compressing objects: 100% (511/511)   [Kremote: Compressing objects: 100% (511/511), done.[K
Receiving objects:   0% (1/1169)   Receiving objects:   1% (12/1169)   Receiving objects:   2% (24/1169)   Receiving objects:   3% (36/1169)   Receiving objects:   4% (47/1169)   Receiving objects:   5% (59/1169)   Receiving objects:   6% (71/1169)   Receiving objects:   7% (82/1169)   Receiving objects:   8% (94/1169)   Receiving objects:   9% (106/1169)   Receiving objects:  10% (117/1169)   Receiving objects:  11% (129/1169)   Receiving objects:  12% (141/1169)   Receiving objects:  13% (152/1169)   Receiving objects:  14% (164/1169)   Receiving objects:  15% (176/1169)   Receiving objects:  16% (188/1169)   Receiving objects:  17% (199/1169)   Receiving objects:  18% (211/1169)   Receiving objects:  19% (223/1169)   Receiving objects:  20% (234/1169)   Receiving objects:  21% (246/1169)   Receiving objects:  22% (258/1169)   Receiving objects:  23% (269/1169)   Receiving objects:  24% (281/1169)   Receiving objects:  25% (293/1169)   Receiving objects:  26% (304/1169)   Receiving objects:  27% (316/1169)   Receiving objects:  28% (328/1169)   Receiving objects:  29% (340/1169)   Receiving objects:  30% (351/1169)   Receiving objects:  31% (363/1169)   Receiving objects:  32% (375/1169)   Receiving objects:  33% (386/1169)   Receiving objects:  34% (398/1169)   Receiving objects:  35% (410/1169)   Receiving objects:  36% (421/1169)   Receiving objects:  37% (433/1169)   Receiving objects:  38% (445/1169)   Receiving objects:  39% (456/1169)   Receiving objects:  40% (468/1169)   Receiving objects:  41% (480/1169)   Receiving objects:  42% (491/1169)   Receiving objects:  43% (503/1169)   Receiving objects:  44% (515/1169)   Receiving objects:  45% (527/1169)   Receiving objects:  46% (538/1169)   Receiving objects:  47% (550/1169)   Receiving objects:  48% (562/1169)   Receiving objects:  49% (573/1169)   Receiving objects:  50% (585/1169)   Receiving objects:  51% (597/1169)   Receiving objects:  52% (608/1169)   Receiving objects:  53% (620/1169)   Receiving objects:  54% (632/1169)   Receiving objects:  55% (643/1169)   Receiving objects:  56% (655/1169)   Receiving objects:  57% (667/1169)   Receiving objects:  58% (679/1169)   Receiving objects:  59% (690/1169)   Receiving objects:  60% (702/1169)   Receiving objects:  61% (714/1169)   Receiving objects:  62% (725/1169)   Receiving objects:  63% (737/1169)   Receiving objects:  64% (749/1169)   Receiving objects:  65% (760/1169)   Receiving objects:  66% (772/1169)   Receiving objects:  67% (784/1169)   Receiving objects:  68% (795/1169)   Receiving objects:  69% (807/1169)   Receiving objects:  70% (819/1169)   Receiving objects:  71% (830/1169)   Receiving objects:  72% (842/1169)   Receiving objects:  73% (854/1169)   Receiving objects:  74% (866/1169)   Receiving objects:  75% (877/1169)   Receiving objects:  76% (889/1169)   Receiving objects:  77% (901/1169)   Receiving objects:  78% (912/1169)   Receiving objects:  79% (924/1169)   Receiving objects:  80% (936/1169)   Receiving objects:  81% (947/1169)   Receiving objects:  82% (959/1169)   Receiving objects:  83% (971/1169)   Receiving objects:  84% (982/1169)   Receiving objects:  85% (994/1169)   Receiving objects:  86% (1006/1169)   Receiving objects:  87% (1018/1169)   Receiving objects:  88% (1029/1169)   Receiving objects:  89% (1041/1169)   Receiving objects:  90% (1053/1169)   Receiving objects:  91% (1064/1169)   Receiving objects:  92% (1076/1169)   Receiving objects:  93% (1088/1169)   Receiving objects:  94% (1099/1169)   Receiving objects:  95% (1111/1169)   Receiving objects:  96% (1123/1169)   Receiving objects:  97% (1134/1169)   Receiving objects:  98% (1146/1169)   Receiving objects:  99% (1158/1169)   remote: Total 1169 (delta 708), reused 889 (delta 542), pack-reused 0[K
Receiving objects: 100% (1169/1169)   Receiving objects: 100% (1169/1169), 622.25 KiB | 0 bytes/s, done.
Resolving deltas:   0% (0/708)   Resolving deltas:  19% (135/708)   Resolving deltas:  27% (196/708)   Resolving deltas:  28% (199/708)   Resolving deltas:  33% (235/708)   Resolving deltas:  36% (256/708)   Resolving deltas:  37% (264/708)   Resolving deltas:  56% (403/708)   Resolving deltas:  58% (415/708)   Resolving deltas:  59% (418/708)   Resolving deltas:  61% (435/708)   Resolving deltas:  62% (442/708)   Resolving deltas:  64% (460/708)   Resolving deltas:  65% (461/708)   Resolving deltas:  66% (469/708)   Resolving deltas:  68% (488/708)   Resolving deltas:  69% (489/708)   Resolving deltas:  70% (496/708)   Resolving deltas:  71% (504/708)   Resolving deltas:  74% (526/708)   Resolving deltas:  75% (531/708)   Resolving deltas:  76% (540/708)   Resolving deltas:  77% (548/708)   Resolving deltas:  78% (557/708)   Resolving deltas:  79% (566/708)   Resolving deltas:  80% (567/708)   Resolving deltas:  81% (574/708)   Resolving deltas:  83% (590/708)   Resolving deltas:  84% (599/708)   Resolving deltas:  86% (609/708)   Resolving deltas:  87% (616/708)   Resolving deltas:  88% (624/708)   Resolving deltas:  89% (634/708)   Resolving deltas:  90% (639/708)   Resolving deltas:  91% (647/708)   Resolving deltas:  92% (656/708)   Resolving deltas:  93% (661/708)   Resolving deltas:  94% (666/708)   Resolving deltas:  95% (675/708)   Resolving deltas:  96% (681/708)   Resolving deltas:  97% (688/708)   Resolving deltas:  98% (694/708)   Resolving deltas:  99% (702/708)   Resolving deltas: 100% (708/708)   Resolving deltas: 100% (708/708), done.
Checking connectivity... done.

travis_time:end:1af7ea0e:start=1469552185994741917,finish=1469552186654053984,duration=659312067[0K$ cd zopefoundation/ZODB
$ git checkout -qf 142d69fc6515d5c58cfaa0804c6a4490b45cb60b
travis_fold:end:git.checkout[0K
[33;1mThis job is running on container-based infrastructure, which does not allow use of 'sudo', setuid and setguid executables.[0m
[33;1mIf you require sudo, add 'sudo: required' to your .travis.yml[0m
[33;1mSee https://docs.travis-ci.com/user/workers/container-based-infrastructure/ for details.[0m
travis_time:start:067699ee[0K$ source ~/virtualenv/python3.5/bin/activate

travis_time:end:067699ee:start=1469552190419568317,finish=1469552190424978451,duration=5410134[0Ktravis_fold:start:cache.1[0KSetting up build cache
$ export CASHER_DIR=$HOME/.casher
travis_time:start:12a07743[0K$ Installing caching utilities

travis_time:end:12a07743:start=1469552190725029288,finish=1469552190772316652,duration=47287364[0Ktravis_time:start:0b733fcc[0K
travis_time:end:0b733fcc:start=1469552190779412480,finish=1469552190784391793,duration=4979313[0Ktravis_time:start:0749f752[0K[32;1mattempting to download cache archive[0m
[32;1mfetching multi-commit-FileStorage/cache-linux-precise-e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855--python-3.5.tgz[0m
[32;1mfound cache[0m

travis_time:end:0749f752:start=1469552190790241225,finish=1469552191720962907,duration=930721682[0Ktravis_time:start:175e7c2b[0K
travis_time:end:175e7c2b:start=1469552191726664968,finish=1469552191731768684,duration=5103716[0Ktravis_time:start:17551f10[0K[32;1madding /home/travis/.cache/pip to cache[0m

travis_time:end:17551f10:start=1469552191737466838,finish=1469552193253083550,duration=1515616712[0Ktravis_fold:end:cache.1[0K$ python --version
Python 3.5.2
$ pip --version
pip 8.1.2 from /home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages (python 3.5)
travis_fold:start:install.1[0Ktravis_time:start:050a1ed2[0K$ travis_retry pip install -U pip
Requirement already up-to-date: pip in /home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages

travis_time:end:050a1ed2:start=1469552193831180005,finish=1469552194513467297,duration=682287292[0Ktravis_fold:end:install.1[0Ktravis_fold:start:install.2[0Ktravis_time:start:1b8d853c[0K$ travis_retry pip install -U wheel
Requirement already up-to-date: wheel in /home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages

travis_time:end:1b8d853c:start=1469552194519836126,finish=1469552195214406905,duration=694570779[0Ktravis_fold:end:install.2[0Ktravis_fold:start:install.3[0Ktravis_time:start:20b8f85b[0K$ travis_retry pip install -U manuel zope.testing zope.testrunner
Collecting manuel
Collecting zope.testing
Collecting zope.testrunner
Collecting setuptools (from manuel)
  Downloading setuptools-25.1.0-py2.py3-none-any.whl (442kB)
[?25l[K    2% |â–Š                               | 10kB 22.1MB/s eta 0:00:01[K    4% |â–ˆâ–Œ                              | 20kB 20.6MB/s eta 0:00:01[K    6% |â–ˆâ–ˆâ–                             | 30kB 20.6MB/s eta 0:00:01[K    9% |â–ˆâ–ˆâ–ˆ                             | 40kB 21.2MB/s eta 0:00:01[K    11% |â–ˆâ–ˆâ–ˆâ–Š                            | 51kB 10.1MB/s eta 0:00:01[K    13% |â–ˆâ–ˆâ–ˆâ–ˆâ–                           | 61kB 11.2MB/s eta 0:00:01[K    16% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                          | 71kB 12.0MB/s eta 0:00:01[K    18% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                          | 81kB 11.1MB/s eta 0:00:01[K    20% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹                         | 92kB 11.8MB/s eta 0:00:01[K    23% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                        | 102kB 12.3MB/s eta 0:00:01[K    25% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                       | 112kB 12.5MB/s eta 0:00:01[K    27% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰                       | 122kB 12.6MB/s eta 0:00:01[K    30% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹                      | 133kB 12.7MB/s eta 0:00:01[K    32% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                     | 143kB 12.8MB/s eta 0:00:01[K    34% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                     | 153kB 19.2MB/s eta 0:00:01[K    37% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰                    | 163kB 16.6MB/s eta 0:00:01[K    39% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹                   | 174kB 16.5MB/s eta 0:00:01[K    41% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž                  | 184kB 19.3MB/s eta 0:00:01[K    43% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                  | 194kB 19.3MB/s eta 0:00:01[K    46% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰                 | 204kB 19.3MB/s eta 0:00:01[K    48% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ                | 215kB 19.1MB/s eta 0:00:01[K    50% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž               | 225kB 19.3MB/s eta 0:00:01[K    53% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ               | 235kB 19.2MB/s eta 0:00:01[K    55% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š              | 245kB 18.8MB/s eta 0:00:01[K    57% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ             | 256kB 18.9MB/s eta 0:00:01[K    60% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž            | 266kB 22.1MB/s eta 0:00:01[K    62% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            | 276kB 22.4MB/s eta 0:00:01[K    64% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š           | 286kB 22.6MB/s eta 0:00:01[K    67% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ          | 296kB 22.5MB/s eta 0:00:01[K    69% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–         | 307kB 22.7MB/s eta 0:00:01[K    71% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         | 317kB 22.4MB/s eta 0:00:01[K    74% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š        | 327kB 22.0MB/s eta 0:00:01[K    76% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–       | 337kB 22.4MB/s eta 0:00:01[K    78% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–      | 348kB 22.4MB/s eta 0:00:01[K    80% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      | 358kB 22.6MB/s eta 0:00:01[K    83% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 368kB 23.0MB/s eta 0:00:01[K    85% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 378kB 22.6MB/s eta 0:00:01[K    87% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 389kB 22.9MB/s eta 0:00:01[K    90% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 399kB 23.0MB/s eta 0:00:01[K    92% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹  | 409kB 22.7MB/s eta 0:00:01[K    94% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 419kB 23.3MB/s eta 0:00:01[K    97% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 430kB 23.3MB/s eta 0:00:01[K    99% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰| 440kB 23.0MB/s eta 0:00:01[K    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 450kB 2.1MB/s 
[?25hRequirement already up-to-date: six in /home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages (from manuel)
Collecting zope.interface (from zope.testing)
Collecting zope.exceptions (from zope.testing)
Installing collected packages: setuptools, manuel, zope.interface, zope.exceptions, zope.testing, zope.testrunner
  Found existing installation: setuptools 12.0.5
    Uninstalling setuptools-12.0.5:
      Successfully uninstalled setuptools-12.0.5
Successfully installed manuel-1.8.0 setuptools-25.1.0 zope.exceptions-4.0.8 zope.interface-4.2.0 zope.testing-4.5.0 zope.testrunner-4.5.1

travis_time:end:20b8f85b:start=1469552195220691244,finish=1469552199517440347,duration=4296749103[0Ktravis_fold:end:install.3[0Ktravis_fold:start:install.4[0Ktravis_time:start:02cec995[0K$ travis_retry pip install -U -e .
Obtaining file:///home/travis/build/zopefoundation/ZODB
Collecting persistent>=4.2.0 (from ZODB==5.0.0a6)
Collecting BTrees>=4.2.0 (from ZODB==5.0.0a6)
Collecting ZConfig (from ZODB==5.0.0a6)
Collecting transaction>=1.6.1 (from ZODB==5.0.0a6)
Requirement already up-to-date: six in /home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages (from ZODB==5.0.0a6)
Collecting zc.lockfile (from ZODB==5.0.0a6)
Requirement already up-to-date: zope.interface in /home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages (from ZODB==5.0.0a6)
Collecting zodbpickle>=0.6.0 (from ZODB==5.0.0a6)
Requirement already up-to-date: setuptools in /home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages (from zc.lockfile->ZODB==5.0.0a6)
Installing collected packages: persistent, BTrees, ZConfig, transaction, zc.lockfile, zodbpickle, ZODB
  Running setup.py develop for ZODB
Successfully installed BTrees-4.3.1 ZConfig-3.1.0 ZODB persistent-4.2.1 transaction-1.6.1 zc.lockfile-1.2.1 zodbpickle-0.6.0

travis_time:end:02cec995:start=1469552199523934508,finish=1469552206917973652,duration=7394039144[0Ktravis_fold:end:install.4[0Ktravis_time:start:26ca9e6a[0K$ zope-testrunner -u --test-path=src --auto-color --auto-progress
[0mRunning zope.testrunner.layer.UnitTests tests:[0m
  Set up zope.testrunner.layer.UnitTests in [32m0.000[0m seconds.
[0m  Running:[0m
    1/977 (0.1%)                    2/977 (0.2%)                    3/977 (0.3%)

[1;31mFailure in test _save_index (ZODB.FileStorage.tests)[0m
Failed doctest test for ZODB.FileStorage.tests._save_index
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/tests.py", line 146, in _save_index

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/tests.py[0m", line [1;31m178[0m, in [1;36mZODB.FileStorage.tests._save_index[0m
Failed example:
[36m    pos, tid = fs._pos, fs._tid[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.FileStorage.tests._save_index[19]>", line 1, in <module>[0m
[31m        pos, tid = fs._pos, fs._tid[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

    4/977 (0.4%)                    5/977 (0.5%)                    6/977 (0.6%)                    7/977 (0.7%)                    8/977 (0.8%)                    9/977 (0.9%)                    10/977 (1.0%)                     11/977 (1.1%)                     12/977 (1.2%)                     13/977 (1.3%)                     14/977 (1.4%)                     15/977 (1.5%)                     16/977 (1.6%)                     17/977 (1.7%)                     18/977 (1.8%)                     19/977 (1.9%)                     20/977 (2.0%)                     21/977 (2.1%)                     22/977 (2.3%)                     23/977 (2.4%)                     24/977 (2.5%)                     25/977 (2.6%)                     26/977 (2.7%)                     27/977 (2.8%)                     28/977 (2.9%)                     29/977 (3.0%)                     30/977 (3.1%)                     31/977 (3.2%)                     32/977 (3.3%)                     33/977 (3.4%)                     34/977 (3.5%)                     35/977 (3.6%)                     36/977 (3.7%)                     37/977 (3.8%)                     38/977 (3.9%)                     39/977 (4.0%)                     40/977 (4.1%)                     41/977 (4.2%)                     42/977 (4.3%)                     43/977 (4.4%)                     44/977 (4.5%)                     45/977 (4.6%)                     46/977 (4.7%)                     47/977 (4.8%)                     48/977 (4.9%)                     49/977 (5.0%)                     50/977 (5.1%)                     51/977 (5.2%)                     52/977 (5.3%)                     53/977 (5.4%)                     54/977 (5.5%)                     55/977 (5.6%)                     56/977 (5.7%)                     57/977 (5.8%)                     58/977 (5.9%)                     59/977 (6.0%)                     60/977 (6.1%)                     61/977 (6.2%)                     62/977 (6.3%)                     63/977 (6.4%)                     64/977 (6.6%)                     65/977 (6.7%)                     66/977 (6.8%)                     67/977 (6.9%)                     68/977 (7.0%)                     69/977 (7.1%)                     70/977 (7.2%)                     71/977 (7.3%)                     72/977 (7.4%)                     73/977 (7.5%)                     74/977 (7.6%)                     75/977 (7.7%)                     76/977 (7.8%)                     77/977 (7.9%)                     78/977 (8.0%)                     79/977 (8.1%)                     80/977 (8.2%)                     81/977 (8.3%)                     82/977 (8.4%)                     83/977 (8.5%)                     84/977 (8.6%)                     85/977 (8.7%)                     86/977 (8.8%)                     87/977 (8.9%)                     88/977 (9.0%)                     89/977 (9.1%)                     90/977 (9.2%)                     91/977 (9.3%)                     92/977 (9.4%)                     93/977 (9.5%)                     94/977 (9.6%)                     95/977 (9.7%)                     96/977 (9.8%)                     97/977 (9.9%)                     98/977 (10.0%)                      99/977 (10.1%)                      100/977 (10.2%)                       101/977 (10.3%)                       102/977 (10.4%)                       103/977 (10.5%)                       104/977 (10.6%)                       105/977 (10.7%)                       106/977 (10.8%)                       107/977 (11.0%)                       108/977 (11.1%)                       109/977 (11.2%)                       110/977 (11.3%)                       111/977 (11.4%)                       112/977 (11.5%)                       113/977 (11.6%)                       114/977 (11.7%)                       115/977 (11.8%)                       116/977 (11.9%)                       117/977 (12.0%)                       118/977 (12.1%)                       119/977 (12.2%)                       120/977 (12.3%)                       121/977 (12.4%)                       122/977 (12.5%)                       123/977 (12.6%)                       124/977 (12.7%)                       125/977 (12.8%)                       126/977 (12.9%)                       127/977 (13.0%)                       128/977 (13.1%)                       129/977 (13.2%)                       130/977 (13.3%)                       131/977 (13.4%)                       132/977 (13.5%)                       133/977 (13.6%)                       134/977 (13.7%)                       135/977 (13.8%)                       136/977 (13.9%)                       137/977 (14.0%)                       138/977 (14.1%)                       139/977 (14.2%)                       140/977 (14.3%)                       141/977 (14.4%)                       142/977 (14.5%)                       143/977 (14.6%)                       144/977 (14.7%)                       145/977 (14.8%)                       146/977 (14.9%)                       147/977 (15.0%)                       148/977 (15.1%)                       149/977 (15.3%)                       150/977 (15.4%)                       151/977 (15.5%)                       152/977 (15.6%)                       153/977 (15.7%)                       154/977 (15.8%)                       155/977 (15.9%)                       156/977 (16.0%)                       157/977 (16.1%)                       158/977 (16.2%)                       159/977 (16.3%)                       160/977 (16.4%)                       161/977 (16.5%)                       162/977 (16.6%)                       163/977 (16.7%)                       164/977 (16.8%)                       165/977 (16.9%)                       166/977 (17.0%)                       167/977 (17.1%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m
Failed doctest test for DemoStorage.test
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m215[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[73]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m226[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    with conn.root()['blob'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[80]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open() as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m229[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    with conn.root()['blob'].open('w') as file:[0m
[36m        _ = file.write(b'state 2')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[82]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open('w') as file:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m232[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    with conn.root()['blob'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[84]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open() as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m247[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    with conn.root()['blob'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[92]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open() as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m271[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    with conn.root()['blob'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[103]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open() as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m274[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    type(storage.changes).__name__[0m
Expected:
[32m    'BlobStorage'[0m
Got:
[31m    'MappingStorage'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m278[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    with conn.root()['blob'].open('w') as file:[0m
[36m        _ = file.write(b'state 2')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[106]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open('w') as file:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/../DemoStorage.test[0m", line [1;31m281[0m, in [1;36mDemoStorage.test[0m
Failed example:
[36m    with conn.root()['blob'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest DemoStorage.test[108]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open() as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m

    168/977 (17.2%)                       169/977 (17.3%)                       170/977 (17.4%)                       171/977 (17.5%)                       172/977 (17.6%)                       173/977 (17.7%)                       174/977 (17.8%)                       175/977 (17.9%)                       176/977 (18.0%)                       177/977 (18.1%)                       178/977 (18.2%)                       179/977 (18.3%)                       180/977 (18.4%)                       181/977 (18.5%)                       182/977 (18.6%)                       183/977 (18.7%)                       184/977 (18.8%)                       185/977 (18.9%)                       186/977 (19.0%)                       187/977 (19.1%)                       188/977 (19.2%)                       189/977 (19.3%)                       190/977 (19.4%)                       191/977 (19.5%)                       192/977 (19.7%)                       193/977 (19.8%)                       194/977 (19.9%)                       195/977 (20.0%)                       196/977 (20.1%)                       197/977 (20.2%)                       198/977 (20.3%)                       199/977 (20.4%)                       200/977 (20.5%)                       201/977 (20.6%)                       202/977 (20.7%)                       203/977 (20.8%)                       204/977 (20.9%)                       205/977 (21.0%)                       206/977 (21.1%)                       207/977 (21.2%)                       208/977 (21.3%)                       209/977 (21.4%)                       210/977 (21.5%)                       211/977 (21.6%)                       212/977 (21.7%)                       213/977 (21.8%)                       214/977 (21.9%)                       215/977 (22.0%)                       216/977 (22.1%)                       217/977 (22.2%)                       218/977 (22.3%)                       219/977 (22.4%)                       220/977 (22.5%)                       221/977 (22.6%)                       222/977 (22.7%)                       223/977 (22.8%)                       224/977 (22.9%)                       225/977 (23.0%)                       226/977 (23.1%)                       227/977 (23.2%)                       228/977 (23.3%)                       229/977 (23.4%)                       230/977 (23.5%)                       231/977 (23.6%)                       232/977 (23.7%)                       233/977 (23.8%)                       234/977 (24.0%)                       235/977 (24.1%)                       236/977 (24.2%)                       237/977 (24.3%)                       238/977 (24.4%)                       239/977 (24.5%)                       240/977 (24.6%)                       241/977 (24.7%)                       242/977 (24.8%)                       243/977 (24.9%)                       244/977 (25.0%)                       245/977 (25.1%)                       246/977 (25.2%)                       247/977 (25.3%)                       248/977 (25.4%)                       249/977 (25.5%)                       250/977 (25.6%)                       251/977 (25.7%)                       252/977 (25.8%)                       253/977 (25.9%)                       254/977 (26.0%)                       255/977 (26.1%)                       256/977 (26.2%)                       257/977 (26.3%)                       258/977 (26.4%)                       259/977 (26.5%)                       260/977 (26.6%)                       261/977 (26.7%)                       262/977 (26.8%)                       263/977 (26.9%)                       264/977 (27.0%)                       265/977 (27.1%)                       266/977 (27.2%)                       267/977 (27.3%)                       268/977 (27.4%)                       269/977 (27.5%)                       270/977 (27.6%)                       271/977 (27.7%)                       272/977 (27.8%)                       273/977 (27.9%)                       274/977 (28.0%)                       275/977 (28.1%)                       276/977 (28.2%)                       277/977 (28.4%)                       278/977 (28.5%)                       279/977 (28.6%)                       280/977 (28.7%)                       281/977 (28.8%)                       282/977 (28.9%)                       283/977 (29.0%)                       284/977 (29.1%)                       285/977 (29.2%)                       286/977 (29.3%)                       287/977 (29.4%)                       288/977 (29.5%)                       289/977 (29.6%)                       290/977 (29.7%)                       291/977 (29.8%)                       292/977 (29.9%)                       293/977 (30.0%)                       294/977 (30.1%)                       295/977 (30.2%)                       296/977 (30.3%)                       297/977 (30.4%)                       298/977 (30.5%)                       299/977 (30.6%)                       300/977 (30.7%)                       301/977 (30.8%)                       302/977 (30.9%)                       303/977 (31.0%)                       304/977 (31.1%)                       305/977 (31.2%)                       306/977 (31.3%)                       307/977 (31.4%)                       308/977 (31.5%)                       309/977 (31.6%)                       310/977 (31.7%)                       311/977 (31.8%)                       312/977 (31.9%)                       313/977 (32.0%)                       314/977 (32.1%)                       315/977 (32.2%)                       316/977 (32.3%)                       317/977 (32.4%)                       318/977 (32.5%)                       319/977 (32.7%)                       320/977 (32.8%)                       321/977 (32.9%)                       322/977 (33.0%)                       323/977 (33.1%)                       324/977 (33.2%)                       325/977 (33.3%)                       326/977 (33.4%)                       327/977 (33.5%)                       328/977 (33.6%)                       329/977 (33.7%)                       330/977 (33.8%)                       331/977 (33.9%)                       332/977 (34.0%)                       333/977 (34.1%)                       334/977 (34.2%)                       335/977 (34.3%)                       336/977 (34.4%)                       337/977 (34.5%)                       338/977 (34.6%)                       339/977 (34.7%)                       340/977 (34.8%)                       341/977 (34.9%)                       342/977 (35.0%)                       343/977 (35.1%)                       344/977 (35.2%)                       345/977 (35.3%)                       346/977 (35.4%)                       347/977 (35.5%)                       348/977 (35.6%)                       349/977 (35.7%)                       350/977 (35.8%)                       351/977 (35.9%)                       352/977 (36.0%)                       353/977 (36.1%)                       354/977 (36.2%)                       355/977 (36.3%)                       356/977 (36.4%)                       357/977 (36.5%)                       358/977 (36.6%)                       359/977 (36.7%)                       360/977 (36.8%)                       361/977 (36.9%)                       362/977 (37.1%)                       363/977 (37.2%)                       364/977 (37.3%)                       365/977 (37.4%)                       366/977 (37.5%)                       367/977 (37.6%)                       368/977 (37.7%)                       369/977 (37.8%)                       370/977 (37.9%)                       371/977 (38.0%)                       372/977 (38.1%)                       373/977 (38.2%)                       374/977 (38.3%)                       375/977 (38.4%)                       376/977 (38.5%)                       377/977 (38.6%)                       378/977 (38.7%)                       379/977 (38.8%)                       380/977 (38.9%)                       381/977 (39.0%)                       382/977 (39.1%)                       383/977 (39.2%)                       384/977 (39.3%)                       385/977 (39.4%)                       386/977 (39.5%)                       387/977 (39.6%)                       388/977 (39.7%)                       389/977 (39.8%)                       390/977 (39.9%)                       391/977 (40.0%)                       392/977 (40.1%)                       393/977 (40.2%)                       394/977 (40.3%)                       395/977 (40.4%)                       396/977 (40.5%)                       397/977 (40.6%)                       398/977 (40.7%)                       399/977 (40.8%)                       400/977 (40.9%)                       401/977 (41.0%)                       402/977 (41.1%)                       403/977 (41.2%)                       404/977 (41.4%)                       405/977 (41.5%)                       406/977 (41.6%)                       407/977 (41.7%)                       408/977 (41.8%)                       409/977 (41.9%)                       410/977 (42.0%)                       411/977 (42.1%)                       412/977 (42.2%)                       413/977 (42.3%)                       414/977 (42.4%)                       415/977 (42.5%)                       416/977 (42.6%)                       417/977 (42.7%)                       418/977 (42.8%)                       419/977 (42.9%)                       420/977 (43.0%)                       421/977 (43.1%)                       422/977 (43.2%)                       423/977 (43.3%)                       424/977 (43.4%)                       425/977 (43.5%)                       426/977 (43.6%)                       427/977 (43.7%)                       428/977 (43.8%)                       429/977 (43.9%)                       430/977 (44.0%)                       431/977 (44.1%)                       432/977 (44.2%)                       433/977 (44.3%)                       434/977 (44.4%)                       435/977 (44.5%)                       436/977 (44.6%)                       437/977 (44.7%)                       438/977 (44.8%)                       439/977 (44.9%)                       440/977 (45.0%)                       441/977 (45.1%)                       442/977 (45.2%)                       443/977 (45.3%)                       444/977 (45.4%)                       445/977 (45.5%)                       446/977 (45.6%)                       447/977 (45.8%)                       448/977 (45.9%)                       449/977 (46.0%)                       450/977 (46.1%)                       451/977 (46.2%)                       452/977 (46.3%)                       453/977 (46.4%)                       454/977 (46.5%)                       455/977 (46.6%)                       456/977 (46.7%)                       457/977 (46.8%)                       458/977 (46.9%)                       459/977 (47.0%)                       460/977 (47.1%)                       461/977 (47.2%)                       462/977 (47.3%)                       463/977 (47.4%)                       464/977 (47.5%)                       465/977 (47.6%)                       466/977 (47.7%)                       467/977 (47.8%)                       468/977 (47.9%)                       469/977 (48.0%)                       470/977 (48.1%)                       471/977 (48.2%)                       472/977 (48.3%)                       473/977 (48.4%)                       474/977 (48.5%)                       475/977 (48.6%)                       476/977 (48.7%)                       477/977 (48.8%)                       478/977 (48.9%)                       479/977 (49.0%)                       480/977 (49.1%)                       481/977 (49.2%)                       482/977 (49.3%)                       483/977 (49.4%)                       484/977 (49.5%)                       485/977 (49.6%)                       486/977 (49.7%)                       487/977 (49.8%)                       488/977 (49.9%)                       489/977 (50.1%)                       490/977 (50.2%)                       491/977 (50.3%)                       492/977 (50.4%)                       493/977 (50.5%)                       494/977 (50.6%)                       495/977 (50.7%)                       496/977 (50.8%)                       497/977 (50.9%)                       498/977 (51.0%)                       499/977 (51.1%)                       500/977 (51.2%)                       501/977 (51.3%)                       502/977 (51.4%)                       503/977 (51.5%)                       504/977 (51.6%)                       505/977 (51.7%)                       506/977 (51.8%)                       507/977 (51.9%)                       508/977 (52.0%)                       509/977 (52.1%)                       510/977 (52.2%)                       511/977 (52.3%)                       512/977 (52.4%)                       513/977 (52.5%)                       514/977 (52.6%)                       515/977 (52.7%)                       516/977 (52.8%)                       517/977 (52.9%)                       518/977 (53.0%)                       519/977 (53.1%)                       520/977 (53.2%)                       521/977 (53.3%)                       522/977 (53.4%)                       523/977 (53.5%)                       524/977 (53.6%)                       525/977 (53.7%)                       526/977 (53.8%)                       527/977 (53.9%)                       528/977 (54.0%)                       529/977 (54.1%)                       530/977 (54.2%)                       531/977 (54.4%)                       532/977 (54.5%)                       533/977 (54.6%)                       534/977 (54.7%)                       535/977 (54.8%)                       536/977 (54.9%)                       537/977 (55.0%)                       538/977 (55.1%)                       539/977 (55.2%)                       540/977 (55.3%)                       541/977 (55.4%)                       542/977 (55.5%)                       543/977 (55.6%)                       544/977 (55.7%)                       545/977 (55.8%)                       546/977 (55.9%)                       547/977 (56.0%)                       548/977 (56.1%)                       549/977 (56.2%)                       550/977 (56.3%)                       551/977 (56.4%)                       552/977 (56.5%)                       553/977 (56.6%)                       554/977 (56.7%)                       555/977 (56.8%)                       556/977 (56.9%)                       557/977 (57.0%)                       558/977 (57.1%)                       559/977 (57.2%)                       560/977 (57.3%)                       561/977 (57.4%)                       562/977 (57.5%)                       563/977 (57.6%)                       564/977 (57.7%)                       565/977 (57.8%)                       566/977 (57.9%)                       567/977 (58.0%)                       568/977 (58.1%)                       569/977 (58.2%)                       570/977 (58.3%)                       571/977 (58.4%)                       572/977 (58.5%)                       573/977 (58.6%)                       574/977 (58.8%)                       575/977 (58.9%)                       576/977 (59.0%)                       577/977 (59.1%)                       578/977 (59.2%)                       579/977 (59.3%)                       580/977 (59.4%)                       581/977 (59.5%)                       582/977 (59.6%)                       583/977 (59.7%)                       584/977 (59.8%)                       585/977 (59.9%)                       586/977 (60.0%)                       587/977 (60.1%)                       588/977 (60.2%)                       589/977 (60.3%)                       590/977 (60.4%)                       591/977 (60.5%)                       592/977 (60.6%)                       593/977 (60.7%)                       594/977 (60.8%)                       595/977 (60.9%)                       596/977 (61.0%)                       597/977 (61.1%)                       598/977 (61.2%)                       599/977 (61.3%)                       600/977 (61.4%)                       601/977 (61.5%)                       602/977 (61.6%)                       603/977 (61.7%)                       604/977 (61.8%)                       605/977 (61.9%)                       606/977 (62.0%)                       607/977 (62.1%)                       608/977 (62.2%)                       609/977 (62.3%)                       610/977 (62.4%)                       611/977 (62.5%)                       612/977 (62.6%)                       613/977 (62.7%)                       614/977 (62.8%)                       615/977 (62.9%)                       616/977 (63.1%)                       617/977 (63.2%)                       618/977 (63.3%)                       619/977 (63.4%)                       620/977 (63.5%)                       621/977 (63.6%)                       622/977 (63.7%)                       623/977 (63.8%)                       624/977 (63.9%)                       625/977 (64.0%)                       626/977 (64.1%)                       627/977 (64.2%)                       628/977 (64.3%)                       629/977 (64.4%)                       630/977 (64.5%)                       631/977 (64.6%)                       632/977 (64.7%)                       633/977 (64.8%)                       634/977 (64.9%)                       635/977 (65.0%)                       636/977 (65.1%)                       637/977 (65.2%)                       638/977 (65.3%)                       639/977 (65.4%)                       640/977 (65.5%)

[1;31mError in test checkMultipleUndoInOneTransaction (ZODB.tests.testZODB.ZODBTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testZODB.py[0m", line [1;31m439[0m, in [1;36mcheckMultipleUndoInOneTransaction[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x00.  Found b'' at 1226[0m

    641/977 (65.6%)                       642/977 (65.7%)                       643/977 (65.8%)                       644/977 (65.9%)                       645/977 (66.0%)                       646/977 (66.1%)                       647/977 (66.2%)                       648/977 (66.3%)                       649/977 (66.4%)                       650/977 (66.5%)                       651/977 (66.6%)                       652/977 (66.7%)                       653/977 (66.8%)                       654/977 (66.9%)                       655/977 (67.0%)                       656/977 (67.1%)                       657/977 (67.2%)                       658/977 (67.3%)                       659/977 (67.5%)                       660/977 (67.6%)                       661/977 (67.7%)                       662/977 (67.8%)                       663/977 (67.9%)                       664/977 (68.0%)                       665/977 (68.1%)                       666/977 (68.2%)                       667/977 (68.3%)                       668/977 (68.4%)                       669/977 (68.5%)                       670/977 (68.6%)                       671/977 (68.7%)                       672/977 (68.8%)                       673/977 (68.9%)                       674/977 (69.0%)                       675/977 (69.1%)                       676/977 (69.2%)                       677/977 (69.3%)                       678/977 (69.4%)                       679/977 (69.5%)                       680/977 (69.6%)                       681/977 (69.7%)                       682/977 (69.8%)                       683/977 (69.9%)                       684/977 (70.0%)                       685/977 (70.1%)                       686/977 (70.2%)                       687/977 (70.3%)                       688/977 (70.4%)                       689/977 (70.5%)                       690/977 (70.6%)                       691/977 (70.7%)                       692/977 (70.8%)                       693/977 (70.9%)                       694/977 (71.0%)                       695/977 (71.1%)                       696/977 (71.2%)                       697/977 (71.3%)                       698/977 (71.4%)                       699/977 (71.5%)                       700/977 (71.6%)                       701/977 (71.8%)                       702/977 (71.9%)                       703/977 (72.0%)                       704/977 (72.1%)                       705/977 (72.2%)                       706/977 (72.3%)                       860/977 (88.0%)                       861/977 (88.1%)                       862/977 (88.2%)                       863/977 (88.3%)                       864/977 (88.4%)                       865/977 (88.5%)                       866/977 (88.6%)                       867/977 (88.7%)                       868/977 (88.8%)                       869/977 (88.9%)                       870/977 (89.0%)                       871/977 (89.2%)                       872/977 (89.3%)                       873/977 (89.4%)                       874/977 (89.5%)                       875/977 (89.6%)                       876/977 (89.7%)                       877/977 (89.8%)                       878/977 (89.9%)                       879/977 (90.0%)                       880/977 (90.1%)                       973/977 (99.6%)                       974/977 (99.7%)                       975/977 (99.8%)                       976/977 (99.9%)                       977/977 (100.0%)                    
[0m  Ran [32m977[0m tests with [1;31m2[0m failures, [1;31m1[0m errors, [32m0[0m skipped in [32m1[0m minutes [32m1.602[0m seconds.[0m
[0mTearing down left over layers:[0m
  Tear down zope.testrunner.layer.UnitTests in [32m0.000[0m seconds.

travis_time:end:26ca9e6a:start=1469552206923897672,finish=1469552270106207751,duration=63182310079[0K
[31;1mThe command "zope-testrunner -u --test-path=src --auto-color --auto-progress" exited with 1.[0m
travis_time:start:1682e572[0K$ zope-testrunner -f --test-path=src --auto-color --auto-progress
[0mRunning .BlobAdaptedFileStorageBlobTests tests:[0m
  Set up .BlobAdaptedFileStorageBlobTests in [32m0.001[0m seconds.
[0m  Running:[0m
    1/22 (4.5%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m
Failed doctest test for blob_connection.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m28[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[13]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m36[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    nothing = transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[17]>", line 1, in <module>[0m
[31m        nothing = transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m43[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    blob2 = root['myblob'][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[21]>", line 1, in <module>[0m
[31m        blob2 = root['myblob'][0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'myblob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m44[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    IBlob.providedBy(blob2)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[22]>", line 1, in <module>[0m
[31m        IBlob.providedBy(blob2)[0m
[31m    NameError: name 'blob2' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m46[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    with blob2.open("r") as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[23]>", line 1, in <module>[0m
[31m        with blob2.open("r") as fp: fp.read()[0m
[31m    NameError: name 'blob2' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m54[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    f = connection.root()['myblob'].open('w')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[27]>", line 1, in <module>[0m
[31m        f = connection.root()['myblob'].open('w')[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'myblob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m55[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    _ = f.write(b'I am an ecstatic Blob.')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[28]>", line 1, in <module>[0m
[31m        _ = f.write(b'I am an ecstatic Blob.')[0m
[31m    NameError: name 'f' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m56[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    f.close()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[29]>", line 1, in <module>[0m
[31m        f.close()[0m
[31m    NameError: name 'f' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m57[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[30]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 263, in commit[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[17]>", line 1, in <module>[0m
[31m        nothing = transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_connection.txt[0m", line [1;31m58[0m, in [1;36mblob_connection.txt[0m
Failed example:
[36m    with connection3.root()['myblob'].open('r') as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_connection.txt[31]>", line 1, in <module>[0m
[31m        with connection3.root()['myblob'].open('r') as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'myblob'[0m

    2/22 (9.1%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m
Failed doctest test for blob_importexport.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m33[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[16]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m37[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    conn = root1['blobdata']._p_jar[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[17]>", line 1, in <module>[0m
[31m        conn = root1['blobdata']._p_jar[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blobdata'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m38[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    oid = root1['blobdata']._p_oid[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[18]>", line 1, in <module>[0m
[31m        oid = root1['blobdata']._p_oid[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blobdata'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m40[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    connection1.exportFile(oid, exportfile).close()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[20]>", line 1, in <module>[0m
[31m        connection1.exportFile(oid, exportfile).close()[0m
[31m    NameError: name 'oid' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m47[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    data = root2._p_jar.importFile(exportfile)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[24]>", line 1, in <module>[0m
[31m        data = root2._p_jar.importFile(exportfile)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/ExportImport.py", line 77, in importFile[0m
[31m        with open(f, 'rb') as fp:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'export'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m48[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    root2['blobdata'] = data[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[25]>", line 1, in <module>[0m
[31m        root2['blobdata'] = data[0m
[31m    NameError: name 'data' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m53[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    items1 = root1['blobdata'][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[27]>", line 1, in <module>[0m
[31m        items1 = root1['blobdata'][0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blobdata'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m54[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    items2 = root2['blobdata'][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[28]>", line 1, in <module>[0m
[31m        items2 = root2['blobdata'][0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blobdata'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m55[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    bool(items1.keys() == items2.keys())[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[29]>", line 1, in <module>[0m
[31m        bool(items1.keys() == items2.keys())[0m
[31m    NameError: name 'items1' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m57[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    with items1['blob1'].open() as fp1:[0m
[36m        with items2['blob1'].open() as fp2:[0m
[36m            fp1.read() == fp2.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[30]>", line 1, in <module>[0m
[31m        with items1['blob1'].open() as fp1:[0m
[31m    NameError: name 'items1' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m61[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    with items1['blob2'].open() as fp1:[0m
[36m        with items2['blob2'].open() as fp2:[0m
[36m            fp1.read() == fp2.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[31]>", line 1, in <module>[0m
[31m        with items1['blob2'].open() as fp1:[0m
[31m    NameError: name 'items1' is not defined[0m

    3/22 (13.6%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m
Failed doctest test for blob_transaction.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m44[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[19]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m49[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    os.path.exists(fname)[0m
Expected:
[32m    False[0m
Got:
[31m    True[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m53[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1.open('w') as file:[0m
[36m        _ = file.write(b'this is new blob 1')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[22]>", line 1, in <module>[0m
[31m        with blob1.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 210, in open[0m
[31m        self._p_changed = True[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 792, in register[0m
[31m        self._register(obj)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 802, in _register[0m
[31m        self.transaction_manager.get().join(self)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 149, in join[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[19]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m55[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1.open() as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[23]>", line 1, in <module>[0m
[31m        with blob1.open() as fp:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 152, in open[0m
[31m        raise BlobError("Already opened for writing.")[0m
[31m    ZODB.interfaces.BlobError: Already opened for writing.[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m63[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    os.path.exists(fname)[0m
Expected:
[32m    False[0m
Got:
[31m    True[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m65[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1._p_blob_uncommitted[0m
Expected nothing
Got:
[31m    '/tmp/testra9fgrxw/blobs/tmp/BUCgexfuswq'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m67[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1.open() as fp:[0m
[36m        fp.read()[0m
Expected:
[32m    'this is blob 1'[0m
Got:
[31m    ''[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m76[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1a = root2['blob1'][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[32]>", line 1, in <module>[0m
[31m        blob1a = root2['blob1'][0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m78[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh1 = blob1a.open("r")[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[33]>", line 1, in <module>[0m
[31m        blob1afh1 = blob1a.open("r")[0m
[31m    NameError: name 'blob1a' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m79[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh1.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[34]>", line 1, in <module>[0m
[31m        blob1afh1.read()[0m
[31m    NameError: name 'blob1afh1' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m85[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh2 = blob1a.open("r")[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[35]>", line 1, in <module>[0m
[31m        blob1afh2 = blob1a.open("r")[0m
[31m    NameError: name 'blob1a' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m86[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh2.blob is blob1afh1.blob[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[36]>", line 1, in <module>[0m
[31m        blob1afh2.blob is blob1afh1.blob[0m
[31m    NameError: name 'blob1afh2' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m91[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh1.close()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[37]>", line 1, in <module>[0m
[31m        blob1afh1.close()[0m
[31m    NameError: name 'blob1afh1' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m97[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh2.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[39]>", line 1, in <module>[0m
[31m        blob1afh2.read()[0m
[31m    NameError: name 'blob1afh2' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m100[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh2.close()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[40]>", line 1, in <module>[0m
[31m        blob1afh2.close()[0m
[31m    NameError: name 'blob1afh2' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m107[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    bool(blob1a._p_changed)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[41]>", line 1, in <module>[0m
[31m        bool(blob1a._p_changed)[0m
[31m    NameError: name 'blob1a' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m109[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1a.open('r') as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[42]>", line 1, in <module>[0m
[31m        with blob1a.open('r') as fp:[0m
[31m    NameError: name 'blob1a' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m112[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1a.open('a') as blob1afh3:[0m
[36m        assert(bool(blob1a._p_changed))[0m
[36m        _ = blob1afh3.write(b'woot!')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[43]>", line 1, in <module>[0m
[31m        with blob1a.open('a') as blob1afh3:[0m
[31m    NameError: name 'blob1a' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m115[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1afh3.close()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[44]>", line 1, in <module>[0m
[31m        blob1afh3.close()[0m
[31m    NameError: name 'blob1afh3' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m124[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[48]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m130[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1.open('r') as fp:[0m
[36m        fp.read()[0m
Expected:
[32m    'this is blob 1woot!'[0m
Got:
[31m    ''[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m133[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1a.open('r') as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[50]>", line 1, in <module>[0m
[31m        with blob1a.open('r') as fp:[0m
[31m    NameError: name 'blob1a' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m136[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob2.open('r') as fp:[0m
[36m        fp.read()[0m
Expected:
[32m    'this is blob 3'[0m
Got:
[31m    ''[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m145[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1.open('r') as f:[0m
[36m        root1['wontwork'] = f[0m
[36m        transaction.commit()[0m
Expected:
[32m    Traceback (most recent call last):[0m
[32m    ...[0m
[32m    TypeError: ...[0m
Got:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[52]>", line 2, in <module>[0m
[31m        root1['wontwork'] = f[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/persistent/mapping.py", line 64, in __setitem__[0m
[31m        self._p_changed = 1[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 792, in register[0m
[31m        self._register(obj)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 802, in _register[0m
[31m        self.transaction_manager.get().join(self)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 149, in join[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m
[31m    <BLANKLINE>[0m
[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[48]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
[31m    <BLANKLINE>[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m163[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1c3 = root3['blob1'][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[58]>", line 1, in <module>[0m
[31m        blob1c3 = root3['blob1'][0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m164[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob1c4 = root4['blob1'][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[59]>", line 1, in <module>[0m
[31m        blob1c4 = root4['blob1'][0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m165[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1c3.open('a') as blob1c3fh1:[0m
[36m        _ = blob1c3fh1.write(b'this is from connection 3')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[60]>", line 1, in <module>[0m
[31m        with blob1c3.open('a') as blob1c3fh1:[0m
[31m    NameError: name 'blob1c3' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m167[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob1c4.open('a') as blob1c4fh1:[0m
[36m        _ = blob1c4fh1.write(b'this is from connection 4')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[61]>", line 1, in <module>[0m
[31m        with blob1c4.open('a') as blob1c4fh1:[0m
[31m    NameError: name 'blob1c4' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m170[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root3['blob1'].open('r') as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[63]>", line 1, in <module>[0m
[31m        with root3['blob1'].open('r') as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m173[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    tm2.commit()[0m
Expected:
[32m    Traceback (most recent call last):[0m
[32m        ...[0m
[32m    ConflictError: database conflict error (oid 0x01, class ZODB.blob.Blob...)[0m
Got nothing
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m181[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root3['blob1'].open('r') as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[65]>", line 1, in <module>[0m
[31m        with root3['blob1'].open('r') as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m185[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root4['blob1'].open('r') as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[67]>", line 1, in <module>[0m
[31m        with root4['blob1'].open('r') as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m191[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f = root3['blob1'].open('w')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[68]>", line 1, in <module>[0m
[31m        f = root3['blob1'].open('w')[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m192[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    tm1.commit()[0m
Expected:
[32m    Traceback (most recent call last):[0m
[32m    ...[0m
[32m    ValueError: Can't commit with opened blobs.[0m
Got nothing
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m199[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f = root3['blob1'].open('w')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[72]>", line 1, in <module>[0m
[31m        f = root3['blob1'].open('w')[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m202[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f = root3['blob1'].open('r')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[74]>", line 1, in <module>[0m
[31m        f = root3['blob1'].open('r')[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob1'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m203[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    tm1.commit()[0m
Expected:
[32m    Traceback (most recent call last):[0m
[32m    ...[0m
[32m    ValueError: Can't commit with opened blobs.[0m
Got nothing
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m221[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[83]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m222[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[84]>", line 1, in <module>[0m
[31m        with root5['blob'].open("r") as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m225[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("a") as blob_fh:[0m
[36m        _ = blob_fh.write(b" And I'm singing.")[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[85]>", line 1, in <module>[0m
[31m        with root5['blob'].open("a") as blob_fh:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m227[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[86]>", line 1, in <module>[0m
[31m        with root5['blob'].open("r") as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m230[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    savepoint = transaction.savepoint(optimistic=True)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[87]>", line 1, in <module>[0m
[31m        savepoint = transaction.savepoint(optimistic=True)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[83]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m232[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[88]>", line 1, in <module>[0m
[31m        with root5['blob'].open("r") as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m239[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    len([name for name in os.listdir(os.path.join(blob_dir, 'tmp'))[0m
[36m         if name.startswith('savepoint')])[0m
Expected:
[32m    1[0m
Got:
[31m    0[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m246[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[90]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 263, in commit[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[83]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m253[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("a") as file:[0m
[36m        _ = file.write(b" And I'm dancing.")[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[92]>", line 1, in <module>[0m
[31m        with root5['blob'].open("a") as file:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m255[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[93]>", line 1, in <module>[0m
[31m        with root5['blob'].open("r") as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m258[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    savepoint = transaction.savepoint()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[94]>", line 1, in <module>[0m
[31m        savepoint = transaction.savepoint()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[83]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m262[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    len([name for name in os.listdir(os.path.join(blob_dir, 'tmp'))[0m
[36m         if name.startswith('savepoint')])[0m
Expected:
[32m    1[0m
Got:
[31m    0[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m266[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("w") as file:[0m
[36m        _ = file.write(b" And the weather is beautiful.")[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[96]>", line 1, in <module>[0m
[31m        with root5['blob'].open("w") as file:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m268[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    savepoint.rollback()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[97]>", line 1, in <module>[0m
[31m        savepoint.rollback()[0m
[31m    NameError: name 'savepoint' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m270[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[98]>", line 1, in <module>[0m
[31m        with root5['blob'].open("r") as fp:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m294[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[106]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m295[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob.committed()) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[107]>", line 1, in <module>[0m
[31m        with open(blob.committed()) as fp:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 221, in committed[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m301[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f = blob.open('c')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[108]>", line 1, in <module>[0m
[31m        f = blob.open('c')[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 147, in open[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m305[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    type(f) == file_type[0m
Expected:
[32m    True[0m
Got:
[31m    False[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m310[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob.open('w') as file:[0m
[36m        _ = file.write(b'x')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[110]>", line 1, in <module>[0m
[31m        with blob.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 210, in open[0m
[31m        self._p_changed = True[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 792, in register[0m
[31m        self._register(obj)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 802, in _register[0m
[31m        self.transaction_manager.get().join(self)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 149, in join[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[106]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m312[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[111]>", line 1, in <module>[0m
[31m        with blob.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 152, in open[0m
[31m        raise BlobError("Already opened for writing.")[0m
[31m    ZODB.interfaces.BlobError: Already opened for writing.[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m315[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[112]>", line 1, in <module>[0m
[31m        f.read()[0m
[31m    ValueError: I/O operation on closed file[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m359[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[125]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 462, in commit[0m
[31m        self._commit_savepoint(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1004, in _commit_savepoint[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m360[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob.committed()) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[126]>", line 1, in <module>[0m
[31m        with open(blob.committed()) as fp:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 221, in committed[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m379[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    olddata, oldserial = blob_storage.load(blob._p_oid, '')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[128]>", line 1, in <module>[0m
[31m        olddata, oldserial = blob_storage.load(blob._p_oid, '')[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 446, in load[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 433, in _lookup_pos[0m
[31m        return self._index[oid][0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/fsIndex.py", line 108, in __getitem__[0m
[31m        assert isinstance(key, bytes)[0m
[31m    AssertionError[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m384[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.storeBlob(blob._p_oid, oldserial, olddata, 'blobfile',[0m
[36m                                '', t)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[132]>", line 1, in <module>[0m
[31m        blob_storage.storeBlob(blob._p_oid, oldserial, olddata, 'blobfile',[0m
[31m    NameError: name 'oldserial' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m389[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.storeBlob(new_oid, '\0'*8, olddata, 'blobfile2',[0m
[36m                                '', t)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[135]>", line 1, in <module>[0m
[31m        blob_storage.storeBlob(new_oid, '\0'*8, olddata, 'blobfile2',[0m
[31m    NameError: name 'olddata' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m397[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.load(blob._p_oid, '') == (olddata, oldserial)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[138]>", line 1, in <module>[0m
[31m        blob_storage.load(blob._p_oid, '') == (olddata, oldserial)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 446, in load[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 433, in _lookup_pos[0m
[31m        return self._index[oid][0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/fsIndex.py", line 108, in __getitem__[0m
[31m        assert isinstance(key, bytes)[0m
[31m    AssertionError[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m402[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob_storage.loadBlob(blob._p_oid, oldserial)) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[139]>", line 1, in <module>[0m
[31m        with open(blob_storage.loadBlob(blob._p_oid, oldserial)) as fp:[0m
[31m    NameError: name 'oldserial' is not defined[0m

    4/22 (18.2%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m
Failed doctest test for blob_packing.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m36[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    for i in range(5):[0m
[36m        _ = transaction.begin()[0m
[36m        times.append(new_time())[0m
[36m        with blob.open('w') as file:[0m
[36m            _ = file.write(b'this is blob data ' + str(i).encode())[0m
[36m        if i:[0m
[36m            tids.append(blob._p_serial)[0m
[36m        else:[0m
[36m            root['blob'] = blob[0m
[36m        transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[14]>", line 10, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m50[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    oid = root['blob']._p_oid[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[17]>", line 1, in <module>[0m
[31m        oid = root['blob']._p_oid[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m51[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    fns = [ blob_storage.fshelper.getBlobFilename(oid, x) for x in tids ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[18]>", line 1, in <module>[0m
[31m        fns = [ blob_storage.fshelper.getBlobFilename(oid, x) for x in tids ][0m
[31m      File "<doctest blob_packing.txt[18]>", line 1, in <listcomp>[0m
[31m        fns = [ blob_storage.fshelper.getBlobFilename(oid, x) for x in tids ][0m
[31m    NameError: name 'oid' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m52[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ] # no pack[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[19]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ] # no pack[0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m59[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[22]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ][0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m64[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    packtime = times[1][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[23]>", line 1, in <module>[0m
[31m        packtime = times[1][0m
[31m    IndexError: list index out of range[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m66[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[25]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ][0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m71[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    packtime = times[2][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[26]>", line 1, in <module>[0m
[31m        packtime = times[2][0m
[31m    IndexError: list index out of range[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m73[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[28]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ][0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m78[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    packtime = times[3][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[29]>", line 1, in <module>[0m
[31m        packtime = times[3][0m
[31m    IndexError: list index out of range[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m80[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[31]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ][0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m85[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    packtime = times[4][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[32]>", line 1, in <module>[0m
[31m        packtime = times[4][0m
[31m    IndexError: list index out of range[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m87[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[34]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ][0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m94[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[37]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ][0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m101[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    del root['blob'][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[39]>", line 1, in <module>[0m
[31m        del root['blob'][0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/persistent/mapping.py", line 59, in __delitem__[0m
[31m        self.__super_delitem(key)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 988, in __delitem__[0m
[31m        def __delitem__(self, key): del self.data[key][0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m105[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    [ os.path.exists(x) for x in fns ][0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[43]>", line 1, in <module>[0m
[31m        [ os.path.exists(x) for x in fns ][0m
[31m    NameError: name 'fns' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_packing.txt[0m", line [1;31m107[0m, in [1;36mblob_packing.txt[0m
Failed example:
[36m    os.path.exists(os.path.split(fns[0])[0])[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_packing.txt[44]>", line 1, in <module>[0m
[31m        os.path.exists(os.path.split(fns[0])[0])[0m
[31m    NameError: name 'fns' is not defined[0m

    5/22 (22.7%)

[1;31mFailure in test commit_from_wrong_partition (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.commit_from_wrong_partition
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 367, in commit_from_wrong_partition

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m395[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    transaction.commit() # doctest: +ELLIPSIS[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[16]>", line 1, in <module>[0m
[31m        transaction.commit() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m398[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    with root['blob'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[17]>", line 1, in <module>[0m
[31m        with root['blob'].open() as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m403[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    root['blob2'] = Blob()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[18]>", line 1, in <module>[0m
[31m        root['blob2'] = Blob()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/persistent/mapping.py", line 64, in __setitem__[0m
[31m        self._p_changed = 1[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 792, in register[0m
[31m        self._register(obj)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 802, in _register[0m
[31m        self.transaction_manager.get().join(self)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 149, in join[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[16]>", line 1, in <module>[0m
[31m        transaction.commit() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m406[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    _ = transaction.savepoint() # doctest: +ELLIPSIS[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[20]>", line 1, in <module>[0m
[31m        _ = transaction.savepoint() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[16]>", line 1, in <module>[0m
[31m        transaction.commit() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m409[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    transaction.commit() # doctest: +ELLIPSIS[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[21]>", line 1, in <module>[0m
[31m        transaction.commit() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 263, in commit[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[16]>", line 1, in <module>[0m
[31m        transaction.commit() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m


    6/22 (27.3%)

[1;31mFailure in test do_not_depend_on_cwd (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.do_not_depend_on_cwd
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 600, in do_not_depend_on_cwd

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m611[0m, in [1;36mZODB.tests.testblob.do_not_depend_on_cwd[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.do_not_depend_on_cwd[8]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m613[0m, in [1;36mZODB.tests.testblob.do_not_depend_on_cwd[0m
Failed example:
[36m    with conn.root()['blob'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.do_not_depend_on_cwd[10]>", line 1, in <module>[0m
[31m        with conn.root()['blob'].open() as fp: fp.read()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m

    7/22 (31.8%)                    8/22 (36.4%)

[1;31mFailure in test is_blob_record (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.is_blob_record
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 569, in is_blob_record

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m577[0m, in [1;36mZODB.tests.testblob.is_blob_record[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.is_blob_record[5]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m580[0m, in [1;36mZODB.tests.testblob.is_blob_record[0m
Failed example:
[36m    ZODB.blob.is_blob_record(load_current(bs, ZODB.utils.p64(1))[0])[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.is_blob_record[7]>", line 1, in <module>[0m
[31m        ZODB.blob.is_blob_record(load_current(bs, ZODB.utils.p64(1))[0])[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/utils.py", line 398, in load_current[0m
[31m        r = storage.loadBefore(oid, maxtid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x01[0m

    9/22 (40.9%)

[1;31mFailure in test loadblob_tmpstore (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.loadblob_tmpstore
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 530, in loadblob_tmpstore

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m547[0m, in [1;36mZODB.tests.testblob.loadblob_tmpstore[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.loadblob_tmpstore[9]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m548[0m, in [1;36mZODB.tests.testblob.loadblob_tmpstore[0m
Failed example:
[36m    blob_oid = root['blob']._p_oid[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.loadblob_tmpstore[10]>", line 1, in <module>[0m
[31m        blob_oid = root['blob']._p_oid[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 'blob'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m560[0m, in [1;36mZODB.tests.testblob.loadblob_tmpstore[0m
Failed example:
[36m    tmpstore.loadBlob(blob_oid,tid) == blob_storage.loadBlob(blob_oid,tid)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.loadblob_tmpstore[15]>", line 1, in <module>[0m
[31m        tmpstore.loadBlob(blob_oid,tid) == blob_storage.loadBlob(blob_oid,tid)[0m
[31m    NameError: name 'blob_oid' is not defined[0m

    10/22 (45.5%)                     11/22 (50.0%)                     12/22 (54.5%)                     13/22 (59.1%)

[1;31mFailure in test savepoint_cleanup (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.savepoint_cleanup
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 679, in savepoint_cleanup

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m697[0m, in [1;36mZODB.tests.testblob.savepoint_cleanup[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_cleanup[11]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m698[0m, in [1;36mZODB.tests.testblob.savepoint_cleanup[0m
Failed example:
[36m    with conn.root.b.open('w') as file:[0m
[36m        _ = file.write(b'1')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_cleanup[12]>", line 1, in <module>[0m
[31m        with conn.root.b.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m700[0m, in [1;36mZODB.tests.testblob.savepoint_cleanup[0m
Failed example:
[36m    _ = transaction.savepoint()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_cleanup[13]>", line 1, in <module>[0m
[31m        _ = transaction.savepoint()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_cleanup[11]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m


    14/22 (63.6%)

[1;31mFailure in test savepoint_commits_without_invalidations_out_of_order (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 647, in savepoint_commits_without_invalidations_out_of_order

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m656[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    tm1.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[5]>", line 1, in <module>[0m
[31m        tm1.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m657[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    with conn1.root.b.open('w') as file:[0m
[36m        _ = file.write(b'1')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[6]>", line 1, in <module>[0m
[31m        with conn1.root.b.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m659[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    _ = tm1.savepoint()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[7]>", line 1, in <module>[0m
[31m        _ = tm1.savepoint()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[5]>", line 1, in <module>[0m
[31m        tm1.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m663[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    with conn2.root.b.open('w') as file:[0m
[36m        _ = file.write(b'2')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[10]>", line 1, in <module>[0m
[31m        with conn2.root.b.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m665[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    _ = tm1.savepoint()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[11]>", line 1, in <module>[0m
[31m        _ = tm1.savepoint()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[5]>", line 1, in <module>[0m
[31m        tm1.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m666[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    with conn1.root.b.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[12]>", line 1, in <module>[0m
[31m        with conn1.root.b.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m668[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    with conn2.root.b.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[13]>", line 1, in <module>[0m
[31m        with conn2.root.b.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m671[0m, in [1;36mZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[0m
Failed example:
[36m    tm1.commit()  # doctest: +IGNORE_EXCEPTION_DETAIL[0m
Expected:
[32m    Traceback (most recent call last):[0m
[32m        ...[0m
[32m    ConflictError: database conflict error...[0m
Got:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[15]>", line 1, in <module>[0m
[31m        tm1.commit()  # doctest: +IGNORE_EXCEPTION_DETAIL[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 263, in commit[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m
[31m    <BLANKLINE>[0m
[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_commits_without_invalidations_out_of_order[5]>", line 1, in <module>[0m
[31m        tm1.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
[31m    <BLANKLINE>[0m

    15/22 (68.2%)

[1;31mFailure in test savepoint_isolation (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.savepoint_isolation
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 619, in savepoint_isolation

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m626[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[4]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m627[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    with conn.root.b.open('w') as file:[0m
[36m        _ = file.write(b'1')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[5]>", line 1, in <module>[0m
[31m        with conn.root.b.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m629[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    _ = transaction.savepoint()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[6]>", line 1, in <module>[0m
[31m        _ = transaction.savepoint()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[4]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 565, in _store_objects[0m
[31m        '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 171, in storeBlob[0m
[31m        oid, serial, data, blobfilename, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 713, in storeBlob[0m
[31m        self._blob_storeblob(oid, self._tid, blobfilename)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 748, in __getattr__[0m
[31m        return getattr(self.__storage, name)[0m
[31m    AttributeError: 'FileStorage' object has no attribute '_tid'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m632[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    with conn2.root.b.open('w') as file:[0m
[36m        _ = file.write(b'2')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[9]>", line 1, in <module>[0m
[31m        with conn2.root.b.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m635[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    with conn.root.b.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[11]>", line 1, in <module>[0m
[31m        with conn.root.b.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m637[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    with conn2.root.b.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[12]>", line 1, in <module>[0m
[31m        with conn2.root.b.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m642[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    with conn.root.b.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[16]>", line 1, in <module>[0m
[31m        with conn.root.b.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1219, in __getattr__[0m
[31m        raise AttributeError(name)[0m
[31m    AttributeError: b[0m

    16/22 (72.7%)                     17/22 (77.3%)

[1;31mError in test testSimpleBlobRecovery (ZODB.tests.testblob.BlobAdaptedFileStorageRecoveryBlobStorage)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m320[0m, in [1;36mtestSimpleBlobRecovery[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m467[0m, in [1;36mcommit[0m
[36m    self._commit(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m516[0m, in [1;36m_commit[0m
[36m    self._store_objects(ObjectWriter(obj), transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m565[0m, in [1;36m_store_objects[0m
[36m    '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m171[0m, in [1;36mstoreBlob[0m
[36m    oid, serial, data, blobfilename, '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m713[0m, in [1;36mstoreBlob[0m
[36m    self._blob_storeblob(oid, self._tid, blobfilename)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m748[0m, in [1;36m__getattr__[0m
[36m    return getattr(self.__storage, name)[0m
[31mAttributeError: 'FileStorage' object has no attribute '_tid'[0m

    18/22 (81.8%)

[1;31mError in test testRedo (ZODB.tests.testblob.BlobAdaptedFileStorageBlobUndoTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m253[0m, in [1;36mtestRedo[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m467[0m, in [1;36mcommit[0m
[36m    self._commit(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m516[0m, in [1;36m_commit[0m
[36m    self._store_objects(ObjectWriter(obj), transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m565[0m, in [1;36m_store_objects[0m
[36m    '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m171[0m, in [1;36mstoreBlob[0m
[36m    oid, serial, data, blobfilename, '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m713[0m, in [1;36mstoreBlob[0m
[36m    self._blob_storeblob(oid, self._tid, blobfilename)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m748[0m, in [1;36m__getattr__[0m
[36m    return getattr(self.__storage, name)[0m
[31mAttributeError: 'FileStorage' object has no attribute '_tid'[0m

    19/22 (86.4%)

[1;31mError in test testRedoOfCreation (ZODB.tests.testblob.BlobAdaptedFileStorageBlobUndoTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m285[0m, in [1;36mtestRedoOfCreation[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m467[0m, in [1;36mcommit[0m
[36m    self._commit(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m516[0m, in [1;36m_commit[0m
[36m    self._store_objects(ObjectWriter(obj), transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m565[0m, in [1;36m_store_objects[0m
[36m    '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m171[0m, in [1;36mstoreBlob[0m
[36m    oid, serial, data, blobfilename, '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m713[0m, in [1;36mstoreBlob[0m
[36m    self._blob_storeblob(oid, self._tid, blobfilename)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m748[0m, in [1;36m__getattr__[0m
[36m    return getattr(self.__storage, name)[0m
[31mAttributeError: 'FileStorage' object has no attribute '_tid'[0m

    20/22 (90.9%)

[1;31mError in test testUndo (ZODB.tests.testblob.BlobAdaptedFileStorageBlobUndoTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m200[0m, in [1;36mtestUndo[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m467[0m, in [1;36mcommit[0m
[36m    self._commit(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m516[0m, in [1;36m_commit[0m
[36m    self._store_objects(ObjectWriter(obj), transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m565[0m, in [1;36m_store_objects[0m
[36m    '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m171[0m, in [1;36mstoreBlob[0m
[36m    oid, serial, data, blobfilename, '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m713[0m, in [1;36mstoreBlob[0m
[36m    self._blob_storeblob(oid, self._tid, blobfilename)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m748[0m, in [1;36m__getattr__[0m
[36m    return getattr(self.__storage, name)[0m
[31mAttributeError: 'FileStorage' object has no attribute '_tid'[0m

    21/22 (95.5%)

[1;31mError in test testUndoAfterConsumption (ZODB.tests.testblob.BlobAdaptedFileStorageBlobUndoTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m226[0m, in [1;36mtestUndoAfterConsumption[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m467[0m, in [1;36mcommit[0m
[36m    self._commit(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m516[0m, in [1;36m_commit[0m
[36m    self._store_objects(ObjectWriter(obj), transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m565[0m, in [1;36m_store_objects[0m
[36m    '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m171[0m, in [1;36mstoreBlob[0m
[36m    oid, serial, data, blobfilename, '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m713[0m, in [1;36mstoreBlob[0m
[36m    self._blob_storeblob(oid, self._tid, blobfilename)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m748[0m, in [1;36m__getattr__[0m
[36m    return getattr(self.__storage, name)[0m
[31mAttributeError: 'FileStorage' object has no attribute '_tid'[0m

    22/22 (100.0%)

[1;31mError in test testUndoWithoutPreviousVersion (ZODB.tests.testblob.BlobAdaptedFileStorageBlobUndoTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m182[0m, in [1;36mtestUndoWithoutPreviousVersion[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m467[0m, in [1;36mcommit[0m
[36m    self._commit(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m516[0m, in [1;36m_commit[0m
[36m    self._store_objects(ObjectWriter(obj), transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m565[0m, in [1;36m_store_objects[0m
[36m    '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m171[0m, in [1;36mstoreBlob[0m
[36m    oid, serial, data, blobfilename, '', transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m713[0m, in [1;36mstoreBlob[0m
[36m    self._blob_storeblob(oid, self._tid, blobfilename)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py[0m", line [1;31m748[0m, in [1;36m__getattr__[0m
[36m    return getattr(self.__storage, name)[0m
[31mAttributeError: 'FileStorage' object has no attribute '_tid'[0m


[0m  Ran [32m22[0m tests with [1;31m11[0m failures, [1;31m6[0m errors, [32m0[0m skipped in [32m5.527[0m seconds.[0m
[0mRunning .BlobFileHexStorageBlobTests tests:[0m
  Tear down .BlobAdaptedFileStorageBlobTests in [32m0.000[0m seconds.
  Set up .BlobFileHexStorageBlobTests in [32m0.000[0m seconds.
[0m  Running:[0m
    1/22 (4.5%)                   2/22 (9.1%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m
Failed doctest test for blob_importexport.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m49[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[26]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: '2.bobs/tmp/savepointsxmzuakg0/0x03-0x00.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m55[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    bool(items1.keys() == items2.keys())[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[29]>", line 1, in <module>[0m
[31m        bool(items1.keys() == items2.keys())[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 52, in loadBefore[0m
[31m        r = self.base.loadBefore(oid, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x01[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m57[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    with items1['blob1'].open() as fp1:[0m
[36m        with items2['blob1'].open() as fp2:[0m
[36m            fp1.read() == fp2.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[30]>", line 2, in <module>[0m
[31m        with items2['blob1'].open() as fp2:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 982, in __getitem__[0m
[31m        if key in self.data:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 52, in loadBefore[0m
[31m        r = self.base.loadBefore(oid, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x01[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m61[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    with items1['blob2'].open() as fp1:[0m
[36m        with items2['blob2'].open() as fp2:[0m
[36m            fp1.read() == fp2.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[31]>", line 2, in <module>[0m
[31m        with items2['blob2'].open() as fp2:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 982, in __getitem__[0m
[31m        if key in self.data:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 52, in loadBefore[0m
[31m        r = self.base.loadBefore(oid, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x01[0m

    3/22 (13.6%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m
Failed doctest test for blob_transaction.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m246[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[90]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'blobs/tmp/savepointswvgjb0bb/0x03-0x03b8d0d9f2be2aaa.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m255[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Expected:
[32m    "I'm a happy blob. And I'm singing. And I'm dancing."[0m
Got:
[31m    "I'm a happy blob. And I'm dancing."[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m258[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    savepoint = transaction.savepoint()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[94]>", line 1, in <module>[0m
[31m        savepoint = transaction.savepoint()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[90]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'blobs/tmp/savepointswvgjb0bb/0x03-0x03b8d0d9f2be2aaa.spb'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m262[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    len([name for name in os.listdir(os.path.join(blob_dir, 'tmp'))[0m
[36m         if name.startswith('savepoint')])[0m
Expected:
[32m    1[0m
Got:
[31m    0[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m268[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    savepoint.rollback()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[97]>", line 1, in <module>[0m
[31m        savepoint.rollback()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 696, in rollback[0m
[31m        'invalidated by a later savepoint')[0m
[31m    transaction.interfaces.InvalidSavepointRollbackError: invalidated by a later savepoint[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m270[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Expected:
[32m    "I'm a happy blob. And I'm singing. And I'm dancing."[0m
Got:
[31m    ' And the weather is beautiful.'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m294[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[106]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 572, in _store_objects[0m
[31m        s = self._storage.store(oid, serial, p, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 166, in store[0m
[31m        self._storage.store(oid, serial, data, version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 76, in store[0m
[31m        oid, serial, b'.h'+hexlify(data), version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 512, in store[0m
[31m        h = self._read_data_header(old, oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py", line 147, in _read_data_header[0m
[31m        _file.seek(pos)[0m
[31m    ValueError: seek of closed file[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m295[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob.committed()) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[107]>", line 1, in <module>[0m
[31m        with open(blob.committed()) as fp:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 221, in committed[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m301[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f = blob.open('c')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[108]>", line 1, in <module>[0m
[31m        f = blob.open('c')[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 147, in open[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m305[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    type(f) == file_type[0m
Expected:
[32m    True[0m
Got:
[31m    False[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m310[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob.open('w') as file:[0m
[36m        _ = file.write(b'x')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[110]>", line 1, in <module>[0m
[31m        with blob.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 210, in open[0m
[31m        self._p_changed = True[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 792, in register[0m
[31m        self._register(obj)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 802, in _register[0m
[31m        self.transaction_manager.get().join(self)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 149, in join[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[106]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 572, in _store_objects[0m
[31m        s = self._storage.store(oid, serial, p, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 166, in store[0m
[31m        self._storage.store(oid, serial, data, version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 76, in store[0m
[31m        oid, serial, b'.h'+hexlify(data), version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 512, in store[0m
[31m        h = self._read_data_header(old, oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py", line 147, in _read_data_header[0m
[31m        _file.seek(pos)[0m
[31m    ValueError: seek of closed file[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m312[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[111]>", line 1, in <module>[0m
[31m        with blob.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 152, in open[0m
[31m        raise BlobError("Already opened for writing.")[0m
[31m    ZODB.interfaces.BlobError: Already opened for writing.[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m315[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[112]>", line 1, in <module>[0m
[31m        f.read()[0m
[31m    ValueError: I/O operation on closed file[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m359[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[125]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 462, in commit[0m
[31m        self._commit_savepoint(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1011, in _commit_savepoint[0m
[31m        self._storage.store(oid, serial, data, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 166, in store[0m
[31m        self._storage.store(oid, serial, data, version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 76, in store[0m
[31m        oid, serial, b'.h'+hexlify(data), version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 512, in store[0m
[31m        h = self._read_data_header(old, oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py", line 147, in _read_data_header[0m
[31m        _file.seek(pos)[0m
[31m    ValueError: seek of closed file[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m360[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob.committed()) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[126]>", line 1, in <module>[0m
[31m        with open(blob.committed()) as fp:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 221, in committed[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m379[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    olddata, oldserial = blob_storage.load(blob._p_oid, '')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[128]>", line 1, in <module>[0m
[31m        olddata, oldserial = blob_storage.load(blob._p_oid, '')[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/utils.py", line 398, in load_current[0m
[31m        r = storage.loadBefore(oid, maxtid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 52, in loadBefore[0m
[31m        r = self.base.loadBefore(oid, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 433, in _lookup_pos[0m
[31m        return self._index[oid][0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/fsIndex.py", line 108, in __getitem__[0m
[31m        assert isinstance(key, bytes)[0m
[31m    AssertionError[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m384[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.storeBlob(blob._p_oid, oldserial, olddata, 'blobfile',[0m
[36m                                '', t)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[132]>", line 1, in <module>[0m
[31m        blob_storage.storeBlob(blob._p_oid, oldserial, olddata, 'blobfile',[0m
[31m    NameError: name 'oldserial' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m389[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.storeBlob(new_oid, '\0'*8, olddata, 'blobfile2',[0m
[36m                                '', t)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[135]>", line 1, in <module>[0m
[31m        blob_storage.storeBlob(new_oid, '\0'*8, olddata, 'blobfile2',[0m
[31m    NameError: name 'olddata' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m397[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.load(blob._p_oid, '') == (olddata, oldserial)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[138]>", line 1, in <module>[0m
[31m        blob_storage.load(blob._p_oid, '') == (olddata, oldserial)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/utils.py", line 398, in load_current[0m
[31m        r = storage.loadBefore(oid, maxtid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 52, in loadBefore[0m
[31m        r = self.base.loadBefore(oid, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 433, in _lookup_pos[0m
[31m        return self._index[oid][0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/fsIndex.py", line 108, in __getitem__[0m
[31m        assert isinstance(key, bytes)[0m
[31m    AssertionError[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m402[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob_storage.loadBlob(blob._p_oid, oldserial)) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[139]>", line 1, in <module>[0m
[31m        with open(blob_storage.loadBlob(blob._p_oid, oldserial)) as fp:[0m
[31m    NameError: name 'oldserial' is not defined[0m

    4/22 (18.2%)                    5/22 (22.7%)

[1;31mFailure in test commit_from_wrong_partition (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.commit_from_wrong_partition
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 367, in commit_from_wrong_partition

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m409[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    transaction.commit() # doctest: +ELLIPSIS[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[21]>", line 1, in <module>[0m
[31m        transaction.commit() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'data.bobs/tmp/savepoints5bs5cd61/0x02-0x00.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m412[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    with root['blob2'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[22]>", line 1, in <module>[0m
[31m        with root['blob2'].open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py", line 52, in loadBefore[0m
[31m        r = self.base.loadBefore(oid, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x02[0m

    6/22 (27.3%)                    7/22 (31.8%)                    8/22 (36.4%)                    9/22 (40.9%)                    10/22 (45.5%)                     11/22 (50.0%)                     12/22 (54.5%)                     13/22 (59.1%)                     14/22 (63.6%)                     15/22 (68.2%)

[1;31mFailure in test savepoint_isolation (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.savepoint_isolation
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 619, in savepoint_isolation

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m640[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    tm.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[14]>", line 1, in <module>[0m
[31m        tm.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'data.bobs/tmp/savepoints68vt7ll0/0x01-0x03b8d0da1a9ec0dd.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m642[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    with conn.root.b.open() as fp: fp.read()[0m
Expected:
[32m    '2'[0m
Got:
[31m    'initial'[0m

    16/22 (72.7%)                     17/22 (77.3%)                     18/22 (81.8%)                     19/22 (86.4%)                     20/22 (90.9%)                     21/22 (95.5%)                     22/22 (100.0%)                  
[0m  Ran [32m22[0m tests with [1;31m15[0m failures, [32m0[0m errors, [32m0[0m skipped in [32m9.656[0m seconds.[0m
[0mRunning .BlobFileStorageBlobTests tests:[0m
  Tear down .BlobFileHexStorageBlobTests in [32m0.000[0m seconds.
  Set up .BlobFileStorageBlobTests in [32m0.000[0m seconds.
[0m  Running:[0m
                      1/22 (4.5%)                   2/22 (9.1%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m
Failed doctest test for blob_importexport.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m49[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[26]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: '2.bobs/tmp/savepoints_10lh4wd/0x03-0x00.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m55[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    bool(items1.keys() == items2.keys())[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[29]>", line 1, in <module>[0m
[31m        bool(items1.keys() == items2.keys())[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x01[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m57[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    with items1['blob1'].open() as fp1:[0m
[36m        with items2['blob1'].open() as fp2:[0m
[36m            fp1.read() == fp2.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[30]>", line 2, in <module>[0m
[31m        with items2['blob1'].open() as fp2:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 982, in __getitem__[0m
[31m        if key in self.data:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x01[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_importexport.txt[0m", line [1;31m61[0m, in [1;36mblob_importexport.txt[0m
Failed example:
[36m    with items1['blob2'].open() as fp1:[0m
[36m        with items2['blob2'].open() as fp2:[0m
[36m            fp1.read() == fp2.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_importexport.txt[31]>", line 2, in <module>[0m
[31m        with items2['blob2'].open() as fp2:[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 982, in __getitem__[0m
[31m        if key in self.data:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x01[0m

    3/22 (13.6%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m
Failed doctest test for blob_transaction.txt
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m246[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[90]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'blobs/tmp/savepointsg48gcr7y/0x03-0x03b8d0da1c208f33.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m255[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Expected:
[32m    "I'm a happy blob. And I'm singing. And I'm dancing."[0m
Got:
[31m    "I'm a happy blob. And I'm dancing."[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m258[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    savepoint = transaction.savepoint()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[94]>", line 1, in <module>[0m
[31m        savepoint = transaction.savepoint()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 139, in savepoint[0m
[31m        return self.get().savepoint(optimistic)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 192, in savepoint[0m
[31m        self._prior_operation_failed() # doesn't return, it raises[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[90]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'blobs/tmp/savepointsg48gcr7y/0x03-0x03b8d0da1c208f33.spb'[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m262[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    len([name for name in os.listdir(os.path.join(blob_dir, 'tmp'))[0m
[36m         if name.startswith('savepoint')])[0m
Expected:
[32m    1[0m
Got:
[31m    0[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m268[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    savepoint.rollback()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[97]>", line 1, in <module>[0m
[31m        savepoint.rollback()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 696, in rollback[0m
[31m        'invalidated by a later savepoint')[0m
[31m    transaction.interfaces.InvalidSavepointRollbackError: invalidated by a later savepoint[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m270[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with root5['blob'].open("r") as fp:[0m
[36m        fp.read()[0m
Expected:
[32m    "I'm a happy blob. And I'm singing. And I'm dancing."[0m
Got:
[31m    ' And the weather is beautiful.'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m294[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[106]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 572, in _store_objects[0m
[31m        s = self._storage.store(oid, serial, p, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 166, in store[0m
[31m        self._storage.store(oid, serial, data, version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 512, in store[0m
[31m        h = self._read_data_header(old, oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py", line 147, in _read_data_header[0m
[31m        _file.seek(pos)[0m
[31m    ValueError: seek of closed file[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m295[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob.committed()) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[107]>", line 1, in <module>[0m
[31m        with open(blob.committed()) as fp:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 221, in committed[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m301[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f = blob.open('c')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[108]>", line 1, in <module>[0m
[31m        f = blob.open('c')[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 147, in open[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m305[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    type(f) == file_type[0m
Expected:
[32m    True[0m
Got:
[31m    False[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m310[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob.open('w') as file:[0m
[36m        _ = file.write(b'x')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[110]>", line 1, in <module>[0m
[31m        with blob.open('w') as file:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 210, in open[0m
[31m        self._p_changed = True[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 792, in register[0m
[31m        self._register(obj)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 802, in _register[0m
[31m        self.transaction_manager.get().join(self)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 149, in join[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[106]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 467, in commit[0m
[31m        self._commit(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 516, in _commit[0m
[31m        self._store_objects(ObjectWriter(obj), transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 572, in _store_objects[0m
[31m        s = self._storage.store(oid, serial, p, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 166, in store[0m
[31m        self._storage.store(oid, serial, data, version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 512, in store[0m
[31m        h = self._read_data_header(old, oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py", line 147, in _read_data_header[0m
[31m        _file.seek(pos)[0m
[31m    ValueError: seek of closed file[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m312[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with blob.open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[111]>", line 1, in <module>[0m
[31m        with blob.open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 152, in open[0m
[31m        raise BlobError("Already opened for writing.")[0m
[31m    ZODB.interfaces.BlobError: Already opened for writing.[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m315[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    f.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[112]>", line 1, in <module>[0m
[31m        f.read()[0m
[31m    ValueError: I/O operation on closed file[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m359[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[125]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 390, in _commitResources[0m
[31m        rm.commit(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 462, in commit[0m
[31m        self._commit_savepoint(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 1011, in _commit_savepoint[0m
[31m        self._storage.store(oid, serial, data, '', transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 166, in store[0m
[31m        self._storage.store(oid, serial, data, version, transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 512, in store[0m
[31m        h = self._read_data_header(old, oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py", line 147, in _read_data_header[0m
[31m        _file.seek(pos)[0m
[31m    ValueError: seek of closed file[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m360[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob.committed()) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[126]>", line 1, in <module>[0m
[31m        with open(blob.committed()) as fp:[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 221, in committed[0m
[31m        raise BlobError('Uncommitted changes')[0m
[31m    ZODB.interfaces.BlobError: Uncommitted changes[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m379[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    olddata, oldserial = blob_storage.load(blob._p_oid, '')[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[128]>", line 1, in <module>[0m
[31m        olddata, oldserial = blob_storage.load(blob._p_oid, '')[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 446, in load[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 433, in _lookup_pos[0m
[31m        return self._index[oid][0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/fsIndex.py", line 108, in __getitem__[0m
[31m        assert isinstance(key, bytes)[0m
[31m    AssertionError[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m384[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.storeBlob(blob._p_oid, oldserial, olddata, 'blobfile',[0m
[36m                                '', t)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[132]>", line 1, in <module>[0m
[31m        blob_storage.storeBlob(blob._p_oid, oldserial, olddata, 'blobfile',[0m
[31m    NameError: name 'oldserial' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m389[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.storeBlob(new_oid, '\0'*8, olddata, 'blobfile2',[0m
[36m                                '', t)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[135]>", line 1, in <module>[0m
[31m        blob_storage.storeBlob(new_oid, '\0'*8, olddata, 'blobfile2',[0m
[31m    NameError: name 'olddata' is not defined[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m397[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    blob_storage.load(blob._p_oid, '') == (olddata, oldserial)[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[138]>", line 1, in <module>[0m
[31m        blob_storage.load(blob._p_oid, '') == (olddata, oldserial)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 446, in load[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 433, in _lookup_pos[0m
[31m        return self._index[oid][0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/fsIndex.py", line 108, in __getitem__[0m
[31m        assert isinstance(key, bytes)[0m
[31m    AssertionError[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/blob_transaction.txt[0m", line [1;31m402[0m, in [1;36mblob_transaction.txt[0m
Failed example:
[36m    with open(blob_storage.loadBlob(blob._p_oid, oldserial)) as fp:[0m
[36m        fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest blob_transaction.txt[139]>", line 1, in <module>[0m
[31m        with open(blob_storage.loadBlob(blob._p_oid, oldserial)) as fp:[0m
[31m    NameError: name 'oldserial' is not defined[0m

    4/22 (18.2%)                    5/22 (22.7%)

[1;31mFailure in test commit_from_wrong_partition (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.commit_from_wrong_partition
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 367, in commit_from_wrong_partition

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m409[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    transaction.commit() # doctest: +ELLIPSIS[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[21]>", line 1, in <module>[0m
[31m        transaction.commit() # doctest: +ELLIPSIS[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'data.bobs/tmp/savepoints0z7rz2hw/0x02-0x00.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m412[0m, in [1;36mZODB.tests.testblob.commit_from_wrong_partition[0m
Failed example:
[36m    with root['blob2'].open() as fp: fp.read()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.commit_from_wrong_partition[22]>", line 1, in <module>[0m
[31m        with root['blob2'].open() as fp: fp.read()[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 753, in setstate[0m
[31m        p, serial = self._storage.load(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 144, in load[0m
[31m        r = self._storage.loadBefore(oid, self._start)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 476, in loadBefore[0m
[31m        pos = self._lookup_pos(oid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 435, in _lookup_pos[0m
[31m        raise POSKeyError(oid)[0m
[31m    ZODB.POSException.POSKeyError: 0x02[0m

    6/22 (27.3%)                    7/22 (31.8%)                    8/22 (36.4%)                    9/22 (40.9%)                    10/22 (45.5%)                     11/22 (50.0%)                     12/22 (54.5%)                     13/22 (59.1%)                     14/22 (63.6%)                     15/22 (68.2%)

[1;31mFailure in test savepoint_isolation (ZODB.tests.testblob)[0m
Failed doctest test for ZODB.tests.testblob.savepoint_isolation
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py", line 619, in savepoint_isolation

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m640[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    tm.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest ZODB.tests.testblob.savepoint_isolation[14]>", line 1, in <module>[0m
[31m        tm.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 398, in _commitResources[0m
[31m        rm.tpc_finish(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 672, in tpc_finish[0m
[31m        serial = self._storage.tpc_finish(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 182, in tpc_finish[0m
[31m        return self._storage.tpc_finish(transaction, invalidate_finish)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 707, in tpc_finish[0m
[31m        self._finish(tbuf, tid)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 722, in _finish[0m
[31m        self._pos, tindex = tbuf.commit(tid, self._file, pos)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 2210, in commit[0m
[31m        rename_or_copy_blob(blobfilename, targetname)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/blob.py", line 906, in rename_or_copy_blob[0m
[31m        with open(f1, 'rb') as file1:[0m
[31m    FileNotFoundError: [Errno 2] No such file or directory: 'data.bobs/tmp/savepoints0ynnv00v/0x01-0x03b8d0da43f3d988.spb'[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testblob.py[0m", line [1;31m642[0m, in [1;36mZODB.tests.testblob.savepoint_isolation[0m
Failed example:
[36m    with conn.root.b.open() as fp: fp.read()[0m
Expected:
[32m    '2'[0m
Got:
[31m    'initial'[0m

    16/22 (72.7%)                     17/22 (77.3%)                     18/22 (81.8%)                     19/22 (86.4%)                     20/22 (90.9%)                     21/22 (95.5%)                     22/22 (100.0%)                  
[0m  Ran [32m22[0m tests with [1;31m19[0m failures, [32m0[0m errors, [32m0[0m skipped in [32m9.685[0m seconds.[0m
[0mRunning .MVCCMappingBlobTests tests:[0m
  Tear down .BlobFileStorageBlobTests in [32m0.000[0m seconds.
  Set up .MVCCMappingBlobTests in [32m0.000[0m seconds.
[0m  Running:[0m
                      1/15 (6.7%)                   2/15 (13.3%)                    3/15 (20.0%)                    4/15 (26.7%)                    5/15 (33.3%)                    6/15 (40.0%)                    7/15 (46.7%)                    8/15 (53.3%)                    9/15 (60.0%)                    10/15 (66.7%)                     11/15 (73.3%)                     12/15 (80.0%)                     13/15 (86.7%)                     14/15 (93.3%)                     15/15 (100.0%)                  
[0m  Ran [32m15[0m tests with [1;31m19[0m failures, [32m0[0m errors, [32m0[0m skipped in [32m2.237[0m seconds.[0m
[0mRunning .repozo tests:[0m
  Tear down .MVCCMappingBlobTests in [32m0.000[0m seconds.
  Set up .repozo in [32m0.000[0m seconds.
[0m  Running:[0m
                      1/1 (100.0%)

[1;31mError in test test_via_monte_carlo (ZODB.scripts.tests.test_repozo.MonteCarloTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/scripts/tests/test_repozo.py[0m", line [1;31m1106[0m, in [1;36mtest_via_monte_carlo[0m
[36m    self.mutate_pack_backup(i)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/scripts/tests/test_repozo.py[0m", line [1;31m1120[0m, in [1;36mmutate_pack_backup[0m
[36m    self.db.mutate()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/scripts/tests/test_repozo.py[0m", line [1;31m89[0m, in [1;36mmutate[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m472[0m, in [1;36mcommit[0m
[36m    oid, serial, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/BaseStorage.py[0m", line [1;31m352[0m, in [1;36mcheckCurrentSerialInTransaction[0m
[36m    raise POSException.StorageTransactionError(self, transaction)[0m
[31mZODB.POSException.StorageTransactionError: (<ZODB.FileStorage.FileStorage.FileStorage object at 0x7f24f8795940>, <transaction._transaction.Transaction object at 0x7f24f7f3b940>)[0m


[0m  Ran [32m1[0m tests with [1;31m19[0m failures, [1;31m1[0m errors, [32m0[0m skipped in [32m2.066[0m seconds.[0m
[0mRunning .testFileStorage tests:[0m
  Tear down .repozo in [32m0.000[0m seconds.
  Set up .testFileStorage in [32m0.000[0m seconds.
[0m  Running:[0m
    1/416 (0.2%)                    2/416 (0.5%)                    3/416 (0.7%)                    4/416 (1.0%)                    5/416 (1.2%)                    6/416 (1.4%)                    7/416 (1.7%)                    8/416 (1.9%)                    9/416 (2.2%)                    10/416 (2.4%)                     11/416 (2.6%)                     12/416 (2.9%)                     13/416 (3.1%)                     14/416 (3.4%)                     15/416 (3.6%)                     16/416 (3.8%)                     17/416 (4.1%)                     18/416 (4.3%)                     19/416 (4.6%)                     20/416 (4.8%)

[1;31mFailure in test checkFlushNeededAfterTruncate (ZODB.tests.testFileStorage.FileStorageTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m318[0m, in [1;36mcheckFlushNeededAfterTruncate[0m
[36m    self.checkFlushAfterTruncate(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m305[0m, in [1;36mcheckFlushAfterTruncate[0m
[36m    b'foo' if fail else b'bar')[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m820[0m, in [1;36massertEqual[0m
[36m    assertion_func(first, second, msg=msg)[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m813[0m, in [1;36m_baseAssertEqual[0m
[36m    raise self.failureException(msg)[0m
[31mAssertionError: b'bar' != b'foo'[0m

    21/416 (5.0%)                     22/416 (5.3%)                     23/416 (5.5%)                     24/416 (5.8%)                     25/416 (6.0%)                     26/416 (6.2%)                     27/416 (6.5%)                     28/416 (6.7%)                     29/416 (7.0%)                     30/416 (7.2%)                     31/416 (7.5%)                     32/416 (7.7%)                     33/416 (7.9%)                     34/416 (8.2%)                     35/416 (8.4%)                     36/416 (8.7%)                     37/416 (8.9%)                     38/416 (9.1%)                     39/416 (9.4%)                     40/416 (9.6%)                     41/416 (9.9%)                     42/416 (10.1%)                      43/416 (10.3%)                      44/416 (10.6%)                      45/416 (10.8%)                      46/416 (11.1%)                      47/416 (11.3%)                      48/416 (11.5%)                      49/416 (11.8%)                      50/416 (12.0%)                      51/416 (12.3%)                      52/416 (12.5%)                      53/416 (12.7%)                      54/416 (13.0%)                      55/416 (13.2%)                      56/416 (13.5%)                      57/416 (13.7%)                      58/416 (13.9%)                      59/416 (14.2%)                      60/416 (14.4%)                      61/416 (14.7%)                      62/416 (14.9%)                      63/416 (15.1%)                      64/416 (15.4%)                      65/416 (15.6%)                      66/416 (15.9%)                      67/416 (16.1%)                      68/416 (16.3%)                      69/416 (16.6%)                      70/416 (16.8%)                      71/416 (17.1%)                      72/416 (17.3%)                      73/416 (17.5%)                      74/416 (17.8%)                      75/416 (18.0%)                      76/416 (18.3%)                      77/416 (18.5%)                      78/416 (18.8%)

[1;31mError in test checkTwoObjectUndoAtOnce (ZODB.tests.testFileStorage.FileStorageTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m243[0m, in [1;36mcheckTwoObjectUndoAtOnce[0m
[36m    oids = self._begin_undos_vote(t, tid, tid1)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m78[0m, in [1;36m_begin_undos_vote[0m
[36m    self._storage.undo(tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 768[0m

    79/416 (19.0%)                      80/416 (19.2%)                      81/416 (19.5%)                      82/416 (19.7%)

[1;31mError in test checkUndoLogMetadata (ZODB.tests.testFileStorage.FileStorageTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m655[0m, in [1;36mcheckUndoLogMetadata[0m
[36m    txn.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m388[0m, in [1;36m_commitResources[0m
[36m    rm.tpc_begin(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m451[0m, in [1;36mtpc_begin[0m
[36m    self._normal_storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m162[0m, in [1;36mtpc_begin[0m
[36m    self._storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m664[0m, in [1;36mtpc_begin[0m
[36m    transaction, tid, status, self._pos, self.fshelper))[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2093[0m, in [1;36m__init__[0m
[36m    ext = dumps(ext, _protocol)[0m
[31mNameError: name 'dumps' is not defined[0m

    83/416 (20.0%)

[1;31mError in test checkUndoMultipleConflictResolution (ZODB.tests.testFileStorage.FileStorageTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1050[0m

    84/416 (20.2%)

[1;31mError in test checkUndoMultipleConflictResolutionReversed (ZODB.tests.testFileStorage.FileStorageTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m747[0m, in [1;36mcheckUndoMultipleConflictResolutionReversed[0m
[36m    self.checkUndoMultipleConflictResolution(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1050[0m

    85/416 (20.4%)                      86/416 (20.7%)                      87/416 (20.9%)                      88/416 (21.2%)                      89/416 (21.4%)                      90/416 (21.6%)                      91/416 (21.9%)                      92/416 (22.1%)

[1;31mError in test check_checkCurrentSerialInTransaction (ZODB.tests.testFileStorage.FileStorageTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m233[0m, in [1;36mcheck_checkCurrentSerialInTransaction[0m
[36m    self._storage.checkCurrentSerialInTransaction(oid, tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/BaseStorage.py[0m", line [1;31m352[0m, in [1;36mcheckCurrentSerialInTransaction[0m
[36m    raise POSException.StorageTransactionError(self, transaction)[0m
[31mZODB.POSException.StorageTransactionError: (<ZODB.FileStorage.FileStorage.FileStorage object at 0x7f24f846cb38>, <transaction._transaction.Transaction object at 0x7f24f7f586a0>)[0m

    93/416 (22.4%)                      94/416 (22.6%)                      95/416 (22.8%)                      96/416 (23.1%)                      97/416 (23.3%)                      98/416 (23.6%)

[1;31mError in test check_tid_ordering_w_commit (ZODB.tests.testFileStorage.FileStorageTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m326[0m, in [1;36mcheck_tid_ordering_w_commit[0m
[36m    self._storage.tpc_begin(t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m659[0m, in [1;36mtpc_begin[0m
[36m    "Duplicate tpc_begin calls for same transaction")[0m
[31mZODB.POSException.StorageTransactionError: Duplicate tpc_begin calls for same transaction[0m

    99/416 (23.8%)                      100/416 (24.0%)                       101/416 (24.3%)                       102/416 (24.5%)                       103/416 (24.8%)                       104/416 (25.0%)                       105/416 (25.2%)                       106/416 (25.5%)                       107/416 (25.7%)                       108/416 (26.0%)                       109/416 (26.2%)                       110/416 (26.4%)                       111/416 (26.7%)                       112/416 (26.9%)                       113/416 (27.2%)                       114/416 (27.4%)                       115/416 (27.6%)                       116/416 (27.9%)                       117/416 (28.1%)                       118/416 (28.4%)                       119/416 (28.6%)

[1;31mFailure in test checkFlushNeededAfterTruncate (ZODB.tests.testFileStorage.FileStorageHexTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m318[0m, in [1;36mcheckFlushNeededAfterTruncate[0m
[36m    self.checkFlushAfterTruncate(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m305[0m, in [1;36mcheckFlushAfterTruncate[0m
[36m    b'foo' if fail else b'bar')[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m820[0m, in [1;36massertEqual[0m
[36m    assertion_func(first, second, msg=msg)[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m813[0m, in [1;36m_baseAssertEqual[0m
[36m    raise self.failureException(msg)[0m
[31mAssertionError: b'bar' != b'foo'[0m

    120/416 (28.8%)                       121/416 (29.1%)                       122/416 (29.3%)                       123/416 (29.6%)                       124/416 (29.8%)                       125/416 (30.0%)                       126/416 (30.3%)                       127/416 (30.5%)                       128/416 (30.8%)                       129/416 (31.0%)                       130/416 (31.2%)                       131/416 (31.5%)                       132/416 (31.7%)                       133/416 (32.0%)                       134/416 (32.2%)                       135/416 (32.5%)                       136/416 (32.7%)                       137/416 (32.9%)                       138/416 (33.2%)                       139/416 (33.4%)                       140/416 (33.7%)                       141/416 (33.9%)                       142/416 (34.1%)                       143/416 (34.4%)                       144/416 (34.6%)                       145/416 (34.9%)                       146/416 (35.1%)                       147/416 (35.3%)                       148/416 (35.6%)                       149/416 (35.8%)                       150/416 (36.1%)                       151/416 (36.3%)                       152/416 (36.5%)                       153/416 (36.8%)                       154/416 (37.0%)                       155/416 (37.3%)                       156/416 (37.5%)                       157/416 (37.7%)                       158/416 (38.0%)                       159/416 (38.2%)                       160/416 (38.5%)                       161/416 (38.7%)                       162/416 (38.9%)                       163/416 (39.2%)                       164/416 (39.4%)                       165/416 (39.7%)                       166/416 (39.9%)                       167/416 (40.1%)                       168/416 (40.4%)                       169/416 (40.6%)                       170/416 (40.9%)                       171/416 (41.1%)                       172/416 (41.3%)                       173/416 (41.6%)                       174/416 (41.8%)                       175/416 (42.1%)                       176/416 (42.3%)                       177/416 (42.5%)

[1;31mError in test checkTwoObjectUndoAtOnce (ZODB.tests.testFileStorage.FileStorageHexTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m243[0m, in [1;36mcheckTwoObjectUndoAtOnce[0m
[36m    oids = self._begin_undos_vote(t, tid, tid1)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m78[0m, in [1;36m_begin_undos_vote[0m
[36m    self._storage.undo(tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1176[0m

    178/416 (42.8%)                       179/416 (43.0%)                       180/416 (43.3%)                       181/416 (43.5%)

[1;31mError in test checkUndoLogMetadata (ZODB.tests.testFileStorage.FileStorageHexTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m655[0m, in [1;36mcheckUndoLogMetadata[0m
[36m    txn.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m388[0m, in [1;36m_commitResources[0m
[36m    rm.tpc_begin(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m451[0m, in [1;36mtpc_begin[0m
[36m    self._normal_storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m162[0m, in [1;36mtpc_begin[0m
[36m    self._storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m664[0m, in [1;36mtpc_begin[0m
[36m    transaction, tid, status, self._pos, self.fshelper))[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2093[0m, in [1;36m__init__[0m
[36m    ext = dumps(ext, _protocol)[0m
[31mNameError: name 'dumps' is not defined[0m

    182/416 (43.8%)

[1;31mError in test checkUndoMultipleConflictResolution (ZODB.tests.testFileStorage.FileStorageHexTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1578[0m

    183/416 (44.0%)

[1;31mError in test checkUndoMultipleConflictResolutionReversed (ZODB.tests.testFileStorage.FileStorageHexTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m747[0m, in [1;36mcheckUndoMultipleConflictResolutionReversed[0m
[36m    self.checkUndoMultipleConflictResolution(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1578[0m

    184/416 (44.2%)                       185/416 (44.5%)                       186/416 (44.7%)                       187/416 (45.0%)                       188/416 (45.2%)                       189/416 (45.4%)                       190/416 (45.7%)                       191/416 (45.9%)

[1;31mError in test check_checkCurrentSerialInTransaction (ZODB.tests.testFileStorage.FileStorageHexTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m233[0m, in [1;36mcheck_checkCurrentSerialInTransaction[0m
[36m    self._storage.checkCurrentSerialInTransaction(oid, tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/BaseStorage.py[0m", line [1;31m352[0m, in [1;36mcheckCurrentSerialInTransaction[0m
[36m    raise POSException.StorageTransactionError(self, transaction)[0m
[31mZODB.POSException.StorageTransactionError: (<ZODB.FileStorage.FileStorage.FileStorage object at 0x7f24f7f31198>, <transaction._transaction.Transaction object at 0x7f24f7f31128>)[0m

    192/416 (46.2%)                       193/416 (46.4%)                       194/416 (46.6%)                       195/416 (46.9%)                       196/416 (47.1%)                       197/416 (47.4%)

[1;31mError in test check_tid_ordering_w_commit (ZODB.tests.testFileStorage.FileStorageHexTests)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m326[0m, in [1;36mcheck_tid_ordering_w_commit[0m
[36m    self._storage.tpc_begin(t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m659[0m, in [1;36mtpc_begin[0m
[36m    "Duplicate tpc_begin calls for same transaction")[0m
[31mZODB.POSException.StorageTransactionError: Duplicate tpc_begin calls for same transaction[0m

    198/416 (47.6%)                       199/416 (47.8%)                       200/416 (48.1%)                       201/416 (48.3%)                       202/416 (48.6%)

[1;31mError in test checkRestoreAcrossPack (ZODB.tests.testFileStorage.FileStorageRecoveryTest)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/RecoveryStorage.py[0m", line [1;31m65[0m, in [1;36mcheckRestoreAcrossPack[0m
[36m    final)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m629[0m, in [1;36mrestore[0m
[36m    tbuf.store(oid, data, old, False)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2118[0m, in [1;36mstore[0m
[36m    h = DataHeader(oid, z64, prev, self.tpos, 0, len(data)).asString()[0m
[31mTypeError: object of type 'NoneType' has no len()[0m

    203/416 (48.8%)                       204/416 (49.0%)                       205/416 (49.3%)                       206/416 (49.5%)

[1;31mError in test checkRestoreAcrossPack (ZODB.tests.testFileStorage.FileStorageHexRecoveryTest)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/RecoveryStorage.py[0m", line [1;31m65[0m, in [1;36mcheckRestoreAcrossPack[0m
[36m    final)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/hexstorage.py[0m", line [1;31m81[0m, in [1;36mrestore[0m
[36m    transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m629[0m, in [1;36mrestore[0m
[36m    tbuf.store(oid, data, old, False)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2118[0m, in [1;36mstore[0m
[36m    h = DataHeader(oid, z64, prev, self.tpos, 0, len(data)).asString()[0m
[31mTypeError: object of type 'NoneType' has no len()[0m

    207/416 (49.8%)                       208/416 (50.0%)                       209/416 (50.2%)                       210/416 (50.5%)                       211/416 (50.7%)                       212/416 (51.0%)                       213/416 (51.2%)                       214/416 (51.4%)                       215/416 (51.7%)                       216/416 (51.9%)                       217/416 (52.2%)                       218/416 (52.4%)                       219/416 (52.6%)                       220/416 (52.9%)                       221/416 (53.1%)                       222/416 (53.4%)                       223/416 (53.6%)                       224/416 (53.8%)                       225/416 (54.1%)                       226/416 (54.3%)                       227/416 (54.6%)                       228/416 (54.8%)                       229/416 (55.0%)                       230/416 (55.3%)                       231/416 (55.5%)                       232/416 (55.8%)

[1;31mFailure in test checkFlushNeededAfterTruncate (ZODB.tests.testFileStorage.FileStorageTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m318[0m, in [1;36mcheckFlushNeededAfterTruncate[0m
[36m    self.checkFlushAfterTruncate(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m305[0m, in [1;36mcheckFlushAfterTruncate[0m
[36m    b'foo' if fail else b'bar')[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m820[0m, in [1;36massertEqual[0m
[36m    assertion_func(first, second, msg=msg)[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m813[0m, in [1;36m_baseAssertEqual[0m
[36m    raise self.failureException(msg)[0m
[31mAssertionError: b'bar' != b'foo'[0m

    233/416 (56.0%)                       234/416 (56.2%)                       235/416 (56.5%)                       236/416 (56.7%)                       237/416 (57.0%)                       238/416 (57.2%)                       239/416 (57.5%)                       240/416 (57.7%)                       241/416 (57.9%)                       242/416 (58.2%)                       243/416 (58.4%)                       244/416 (58.7%)                       245/416 (58.9%)                       246/416 (59.1%)                       247/416 (59.4%)                       248/416 (59.6%)                       249/416 (59.9%)                       250/416 (60.1%)                       251/416 (60.3%)                       252/416 (60.6%)                       253/416 (60.8%)                       254/416 (61.1%)                       255/416 (61.3%)                       256/416 (61.5%)                       257/416 (61.8%)                       258/416 (62.0%)                       259/416 (62.3%)                       260/416 (62.5%)                       261/416 (62.7%)                       262/416 (63.0%)                       263/416 (63.2%)                       264/416 (63.5%)                       265/416 (63.7%)                       266/416 (63.9%)                       267/416 (64.2%)                       268/416 (64.4%)                       269/416 (64.7%)                       270/416 (64.9%)                       271/416 (65.1%)                       272/416 (65.4%)                       273/416 (65.6%)                       274/416 (65.9%)                       275/416 (66.1%)                       276/416 (66.3%)                       277/416 (66.6%)                       278/416 (66.8%)                       279/416 (67.1%)                       280/416 (67.3%)                       281/416 (67.5%)                       282/416 (67.8%)                       283/416 (68.0%)                       284/416 (68.3%)                       285/416 (68.5%)                       286/416 (68.8%)                       287/416 (69.0%)                       288/416 (69.2%)                       289/416 (69.5%)                       290/416 (69.7%)

[1;31mError in test checkTwoObjectUndoAtOnce (ZODB.tests.testFileStorage.FileStorageTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m243[0m, in [1;36mcheckTwoObjectUndoAtOnce[0m
[36m    oids = self._begin_undos_vote(t, tid, tid1)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m78[0m, in [1;36m_begin_undos_vote[0m
[36m    self._storage.undo(tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 768[0m

    291/416 (70.0%)                       292/416 (70.2%)                       293/416 (70.4%)                       294/416 (70.7%)

[1;31mError in test checkUndoLogMetadata (ZODB.tests.testFileStorage.FileStorageTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m655[0m, in [1;36mcheckUndoLogMetadata[0m
[36m    txn.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m388[0m, in [1;36m_commitResources[0m
[36m    rm.tpc_begin(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m451[0m, in [1;36mtpc_begin[0m
[36m    self._normal_storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m162[0m, in [1;36mtpc_begin[0m
[36m    self._storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m664[0m, in [1;36mtpc_begin[0m
[36m    transaction, tid, status, self._pos, self.fshelper))[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2093[0m, in [1;36m__init__[0m
[36m    ext = dumps(ext, _protocol)[0m
[31mNameError: name 'dumps' is not defined[0m

    295/416 (70.9%)

[1;31mError in test checkUndoMultipleConflictResolution (ZODB.tests.testFileStorage.FileStorageTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1050[0m

    296/416 (71.2%)

[1;31mError in test checkUndoMultipleConflictResolutionReversed (ZODB.tests.testFileStorage.FileStorageTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m747[0m, in [1;36mcheckUndoMultipleConflictResolutionReversed[0m
[36m    self.checkUndoMultipleConflictResolution(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1050[0m

    297/416 (71.4%)                       298/416 (71.6%)                       299/416 (71.9%)                       300/416 (72.1%)                       301/416 (72.4%)                       302/416 (72.6%)                       303/416 (72.8%)                       304/416 (73.1%)

[1;31mError in test check_checkCurrentSerialInTransaction (ZODB.tests.testFileStorage.FileStorageTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m233[0m, in [1;36mcheck_checkCurrentSerialInTransaction[0m
[36m    self._storage.checkCurrentSerialInTransaction(oid, tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/BaseStorage.py[0m", line [1;31m352[0m, in [1;36mcheckCurrentSerialInTransaction[0m
[36m    raise POSException.StorageTransactionError(self, transaction)[0m
[31mZODB.POSException.StorageTransactionError: (<ZODB.FileStorage.FileStorage.FileStorage object at 0x7f24f7ebf470>, <transaction._transaction.Transaction object at 0x7f24f7f36f60>)[0m

    305/416 (73.3%)                       306/416 (73.6%)                       307/416 (73.8%)                       308/416 (74.0%)                       309/416 (74.3%)                       310/416 (74.5%)

[1;31mError in test check_tid_ordering_w_commit (ZODB.tests.testFileStorage.FileStorageTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m326[0m, in [1;36mcheck_tid_ordering_w_commit[0m
[36m    self._storage.tpc_begin(t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m659[0m, in [1;36mtpc_begin[0m
[36m    "Duplicate tpc_begin calls for same transaction")[0m
[31mZODB.POSException.StorageTransactionError: Duplicate tpc_begin calls for same transaction[0m

    311/416 (74.8%)                       312/416 (75.0%)                       313/416 (75.2%)                       314/416 (75.5%)                       315/416 (75.7%)                       316/416 (76.0%)                       317/416 (76.2%)                       318/416 (76.4%)                       319/416 (76.7%)                       320/416 (76.9%)                       321/416 (77.2%)                       322/416 (77.4%)                       323/416 (77.6%)                       324/416 (77.9%)                       325/416 (78.1%)                       326/416 (78.4%)                       327/416 (78.6%)                       328/416 (78.8%)                       329/416 (79.1%)                       330/416 (79.3%)                       331/416 (79.6%)

[1;31mFailure in test checkFlushNeededAfterTruncate (ZODB.tests.testFileStorage.FileStorageHexTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m318[0m, in [1;36mcheckFlushNeededAfterTruncate[0m
[36m    self.checkFlushAfterTruncate(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m305[0m, in [1;36mcheckFlushAfterTruncate[0m
[36m    b'foo' if fail else b'bar')[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m820[0m, in [1;36massertEqual[0m
[36m    assertion_func(first, second, msg=msg)[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m813[0m, in [1;36m_baseAssertEqual[0m
[36m    raise self.failureException(msg)[0m
[31mAssertionError: b'bar' != b'foo'[0m

    332/416 (79.8%)                       333/416 (80.0%)                       334/416 (80.3%)                       335/416 (80.5%)                       336/416 (80.8%)                       337/416 (81.0%)                       338/416 (81.2%)                       339/416 (81.5%)                       340/416 (81.7%)                       341/416 (82.0%)                       342/416 (82.2%)                       343/416 (82.5%)                       344/416 (82.7%)                       345/416 (82.9%)                       346/416 (83.2%)                       347/416 (83.4%)                       348/416 (83.7%)                       349/416 (83.9%)                       350/416 (84.1%)                       351/416 (84.4%)                       352/416 (84.6%)                       353/416 (84.9%)                       354/416 (85.1%)                       355/416 (85.3%)                       356/416 (85.6%)                       357/416 (85.8%)                       358/416 (86.1%)                       359/416 (86.3%)                       360/416 (86.5%)                       361/416 (86.8%)                       362/416 (87.0%)                       363/416 (87.3%)                       364/416 (87.5%)                       365/416 (87.7%)                       366/416 (88.0%)                       367/416 (88.2%)                       368/416 (88.5%)                       369/416 (88.7%)                       370/416 (88.9%)                       371/416 (89.2%)                       372/416 (89.4%)                       373/416 (89.7%)                       374/416 (89.9%)                       375/416 (90.1%)                       376/416 (90.4%)                       377/416 (90.6%)                       378/416 (90.9%)                       379/416 (91.1%)                       380/416 (91.3%)                       381/416 (91.6%)                       382/416 (91.8%)                       383/416 (92.1%)                       384/416 (92.3%)                       385/416 (92.5%)                       386/416 (92.8%)                       387/416 (93.0%)                       388/416 (93.3%)                       389/416 (93.5%)

[1;31mError in test checkTwoObjectUndoAtOnce (ZODB.tests.testFileStorage.FileStorageHexTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m243[0m, in [1;36mcheckTwoObjectUndoAtOnce[0m
[36m    oids = self._begin_undos_vote(t, tid, tid1)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m78[0m, in [1;36m_begin_undos_vote[0m
[36m    self._storage.undo(tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1176[0m

    390/416 (93.8%)                       391/416 (94.0%)                       392/416 (94.2%)                       393/416 (94.5%)

[1;31mError in test checkUndoLogMetadata (ZODB.tests.testFileStorage.FileStorageHexTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m655[0m, in [1;36mcheckUndoLogMetadata[0m
[36m    txn.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m388[0m, in [1;36m_commitResources[0m
[36m    rm.tpc_begin(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py[0m", line [1;31m451[0m, in [1;36mtpc_begin[0m
[36m    self._normal_storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m162[0m, in [1;36mtpc_begin[0m
[36m    self._storage.tpc_begin(transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m664[0m, in [1;36mtpc_begin[0m
[36m    transaction, tid, status, self._pos, self.fshelper))[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2093[0m, in [1;36m__init__[0m
[36m    ext = dumps(ext, _protocol)[0m
[31mNameError: name 'dumps' is not defined[0m

    394/416 (94.7%)

[1;31mError in test checkUndoMultipleConflictResolution (ZODB.tests.testFileStorage.FileStorageHexTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1578[0m

    395/416 (95.0%)

[1;31mError in test checkUndoMultipleConflictResolutionReversed (ZODB.tests.testFileStorage.FileStorageHexTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m747[0m, in [1;36mcheckUndoMultipleConflictResolutionReversed[0m
[36m    self.checkUndoMultipleConflictResolution(True)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/TransactionalUndoStorage.py[0m", line [1;31m741[0m, in [1;36mcheckUndoMultipleConflictResolution[0m
[36m    transaction.commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py[0m", line [1;31m123[0m, in [1;36mcommit[0m
[36m    return self.get().commit()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m280[0m, in [1;36mcommit[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m271[0m, in [1;36mcommit[0m
[36m    self._commitResources()[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m416[0m, in [1;36m_commitResources[0m
[36m    reraise(t, v, tb)[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py[0m", line [1;31m56[0m, in [1;36mreraise[0m
[36m    raise value[0m
[0m  File "[1;34m/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py[0m", line [1;31m390[0m, in [1;36m_commitResources[0m
[36m    rm.commit(self)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/DB.py[0m", line [1;31m954[0m, in [1;36mcommit[0m
[36m    self._storage.undo(tid, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py[0m", line [1;31m246[0m, in [1;36mundo[0m
[36m    result = self._storage.undo(transaction_id, transaction)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m923[0m, in [1;36mundo[0m
[36m    self._txn_undo_write(tpos, tbuf)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m962[0m, in [1;36m_txn_undo_write[0m
[36m    tbuf, h.oid, pos, h.tid, h.prev)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m807[0m, in [1;36m_transactionalUndoRecord[0m
[36m    ctid, cdataptr, current_data = tbuf.undoDataInfo(oid, tpos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m2229[0m, in [1;36mundoDataInfo[0m
[36m    r = self._undoDataInfo(oid, pos)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m239[0m, in [1;36m_undoDataInfo[0m
[36m    h = self._read_data_header(pos, oid)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/format.py[0m", line [1;31m150[0m, in [1;36m_read_data_header[0m
[36m    raise CorruptedDataError(oid, s, pos)[0m
[31mZODB.FileStorage.format.CorruptedDataError: Error reading oid 0x01.  Found b'' at 1578[0m

    396/416 (95.2%)                       397/416 (95.4%)                       398/416 (95.7%)                       399/416 (95.9%)                       400/416 (96.2%)                       401/416 (96.4%)                       402/416 (96.6%)                       403/416 (96.9%)

[1;31mError in test check_checkCurrentSerialInTransaction (ZODB.tests.testFileStorage.FileStorageHexTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m233[0m, in [1;36mcheck_checkCurrentSerialInTransaction[0m
[36m    self._storage.checkCurrentSerialInTransaction(oid, tid, t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/BaseStorage.py[0m", line [1;31m352[0m, in [1;36mcheckCurrentSerialInTransaction[0m
[36m    raise POSException.StorageTransactionError(self, transaction)[0m
[31mZODB.POSException.StorageTransactionError: (<ZODB.FileStorage.FileStorage.FileStorage object at 0x7f24f7eba208>, <transaction._transaction.Transaction object at 0x7f24f7eba898>)[0m

    404/416 (97.1%)                       405/416 (97.4%)                       406/416 (97.6%)                       407/416 (97.8%)                       408/416 (98.1%)                       409/416 (98.3%)

[1;31mError in test check_tid_ordering_w_commit (ZODB.tests.testFileStorage.FileStorageHexTestsWithBlobsEnabled)[0m
Traceback (most recent call last):
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m58[0m, in [1;36mtestPartExecutor[0m
[36m    yield[0m
[0m  File "[1;34m/opt/python/3.5.2/lib/python3.5/unittest/case.py[0m", line [1;31m600[0m, in [1;36mrun[0m
[36m    testMethod()[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/BasicStorage.py[0m", line [1;31m326[0m, in [1;36mcheck_tid_ordering_w_commit[0m
[36m    self._storage.tpc_begin(t)[0m
[0m  File "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py[0m", line [1;31m659[0m, in [1;36mtpc_begin[0m
[36m    "Duplicate tpc_begin calls for same transaction")[0m
[31mZODB.POSException.StorageTransactionError: Duplicate tpc_begin calls for same transaction[0m

    410/416 (98.6%)                       411/416 (98.8%)                       412/416 (99.0%)

[1;31mFailure in test deal_with_finish_failures (ZODB.tests.testFileStorage)[0m
Failed doctest test for ZODB.tests.testFileStorage.deal_with_finish_failures
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py", line 601, in deal_with_finish_failures

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/testFileStorage.py[0m", line [1;31m639[0m, in [1;36mZODB.tests.testFileStorage.deal_with_finish_failures[0m
Failed example:
[36m    load_current(fs, b'\0'*8) # doctest: +ELLIPSIS[0m
Expected:
[32m    Traceback (most recent call last):[0m
[32m    ...[0m
[32m    ValueError: ...[0m
Got:
[31m    ('\x80\x03cpersistent.mapping\nPersistentMapping\nq\x00.\x80\x03}q\x01X\x04\x00\x00\x00dataq\x02}q\x03K\x01K\x01ss.', '\x03\xb8\xd0\xda\xef^\xb8w')[0m

    413/416 (99.3%)                       414/416 (99.5%)                       415/416 (99.8%)                       416/416 (100.0%)

[1;31mFailure in test /home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test[0m
Failed doctest test for IExternalGC.test
  File "/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test", line 0

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test[0m", line [1;31m113[0m, in [1;36mIExternalGC.test[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest IExternalGC.test[41]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 280, in commit[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 388, in _commitResources[0m
[31m        rm.tpc_begin(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 451, in tpc_begin[0m
[31m        self._normal_storage.tpc_begin(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 162, in tpc_begin[0m
[31m        self._storage.tpc_begin(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 659, in tpc_begin[0m
[31m        "Duplicate tpc_begin calls for same transaction")[0m
[31m    ZODB.POSException.StorageTransactionError: Duplicate tpc_begin calls for same transaction[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test[0m", line [1;31m114[0m, in [1;36mIExternalGC.test[0m
Failed example:
[36m    oid = conn.root()[0]._p_oid[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest IExternalGC.test[42]>", line 1, in <module>[0m
[31m        oid = conn.root()[0]._p_oid[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 0[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test[0m", line [1;31m115[0m, in [1;36mIExternalGC.test[0m
Failed example:
[36m    bad_serial = conn.root()[0]._p_serial[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest IExternalGC.test[43]>", line 1, in <module>[0m
[31m        bad_serial = conn.root()[0]._p_serial[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 0[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test[0m", line [1;31m116[0m, in [1;36mIExternalGC.test[0m
Failed example:
[36m    conn.root()[0].x = 1[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest IExternalGC.test[44]>", line 1, in <module>[0m
[31m        conn.root()[0].x = 1[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/collections/__init__.py", line 986, in __getitem__[0m
[31m        raise KeyError(key)[0m
[31m    KeyError: 0[0m
----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test[0m", line [1;31m117[0m, in [1;36mIExternalGC.test[0m
Failed example:
[36m    transaction.commit()[0m
Exception raised:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest IExternalGC.test[45]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 263, in commit[0m
[31m        self._prior_operation_failed() # doesn't return[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 143, in _prior_operation_failed[0m
[31m        self._failure_traceback.getvalue())[0m
[31m    transaction.interfaces.TransactionFailedError: An operation previously failed, with traceback:[0m

[31m      File "/home/travis/virtualenv/python3.5.2/bin/zope-testrunner", line 11, in <module>[0m
[31m        sys.exit(run())[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 27, in run[0m
[31m        failed = run_internal(defaults, args, script_parts=script_parts, cwd=cwd)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/__init__.py", line 44, in run_internal[0m
[31m        runner.run()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 171, in run[0m
[31m        self.run_tests()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 253, in run_tests[0m
[31m        self.skipped, self.import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 425, in run_layer[0m
[31m        import_errors)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/zope/testrunner/runner.py", line 345, in run_tests[0m
[31m        test(result)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 648, in __call__[0m
[31m        return self.run(*args, **kwds)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/unittest/case.py", line 600, in run[0m
[31m        testMethod()[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 2185, in runTest[0m
[31m        test, out=new.write, clear_globs=False)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1467, in run[0m
[31m        return self.__run(test, compileflags, out)[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest IExternalGC.test[41]>", line 1, in <module>[0m
[31m        transaction.commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_manager.py", line 123, in commit[0m
[31m        return self.get().commit()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 278, in commit[0m
[31m        t, v, tb = self._saveAndGetCommitishError()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 271, in commit[0m
[31m        self._commitResources()[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 416, in _commitResources[0m
[31m        reraise(t, v, tb)[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_compat.py", line 56, in reraise[0m
[31m        raise value[0m
[31m      File "/home/travis/virtualenv/python3.5.2/lib/python3.5/site-packages/transaction/_transaction.py", line 388, in _commitResources[0m
[31m        rm.tpc_begin(self)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/Connection.py", line 451, in tpc_begin[0m
[31m        self._normal_storage.tpc_begin(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/mvccadapter.py", line 162, in tpc_begin[0m
[31m        self._storage.tpc_begin(transaction)[0m
[31m      File "/home/travis/build/zopefoundation/ZODB/src/ZODB/FileStorage/FileStorage.py", line 659, in tpc_begin[0m
[31m        "Duplicate tpc_begin calls for same transaction")[0m
[31m    ZODB.POSException.StorageTransactionError: Duplicate tpc_begin calls for same transaction[0m

----------------------------------------------------------------------
[0mFile "[1;34m/home/travis/build/zopefoundation/ZODB/src/ZODB/tests/IExternalGC.test[0m", line [1;31m121[0m, in [1;36mIExternalGC.test[0m
Failed example:
[36m    storage.deleteObject(oid, bad_serial, txn); storage.tpc_vote(txn)[0m
[36m    # doctest: +ELLIPSIS[0m
Expected:
[32m    Traceback (most recent call last):[0m
[32m    ...[0m
[32m    ConflictError: database conflict error ...[0m
Got:
[31m    Traceback (most recent call last):[0m
[31m      File "/opt/python/3.5.2/lib/python3.5/doctest.py", line 1321, in __run[0m
[31m        compileflags, 1), test.globs)[0m
[31m      File "<doctest IExternalGC.test[48]>", line 1, in <module>[0m
[31m        storage.deleteObject(oid, bad_serial, txn); storage.tpc_vote(txn)[0m
[31m    NameError: name 'oid' is not defined[0m


[0m  Ran [32m416[0m tests with [1;31m25[0m failures, [1;31m26[0m errors, [32m0[0m skipped in [32m35.972[0m seconds.[0m
[0mTearing down left over layers:[0m
  Tear down .testFileStorage in [32m0.000[0m seconds.
[0mTotal: [32m498[0m tests, [1;31m25[0m failures, [1;31m33[0m errors, [32m0[0m skipped in [32m1[0m minutes [32m5.389[0m seconds.[0m

travis_time:end:1682e572:start=1469552270112013831,finish=1469552336680069204,duration=66568055373[0K
[31;1mThe command "zope-testrunner -f --test-path=src --auto-color --auto-progress" exited with 1.[0m
travis_fold:start:before_cache[0Ktravis_time:start:2b974d1a[0K$ rm -f $HOME/.cache/pip/log/debug.log

travis_time:end:2b974d1a:start=1469552336686220588,finish=1469552336692197286,duration=5976698[0Ktravis_fold:end:before_cache[0Ktravis_fold:start:cache.2[0Kstore build cache
travis_time:start:145e5600[0K
travis_time:end:145e5600:start=1469552336698142129,finish=1469552336703075203,duration=4933074[0Ktravis_time:start:0951ff33[0K[32;1mchange detected (content changed, file is created, or file is deleted):
/home/travis/.cache/pip/http/0/7/1/e/7/071e78c82ff6df47c20456dd0fb54bc55ce2d307f5b343bebf8cab1a
/home/travis/.cache/pip/http/1/4/5/4/7/14547f4f8fd98bf535d7d6ecd7eadcae9d2afbfd14e8108467865400
/home/travis/.cache/pip/http/3/a/f/3/a/3af3addf06e983a6c02f46e7bea70c221d3ff95bf1418fa6da354e14
/home/travis/.cache/pip/http/3/b/8/8/c/3b88c7e1f0e40f83b5f927b7dfd77bec470c6b5066da5df890620ac9
/home/travis/.cache/pip/http/4/c/3/f/2/4c3f2ffcb4a55f4fe4f16dc2fbff67412ec8d59fa61240903b298618
/home/travis/.cache/pip/http/5/5/9/7/9/5597943121117a11454bd410b64788f17d5e41b4aaa72a6e7d4024aa
/home/travis/.cache/pip/http/7/b/6/7/f/7b67fbe03fb945a04d808d2dfce9bcbe0c48920f34d19bb6b2b64f88
/home/travis/.cache/pip/http/7/e/1/7/2/7e17243d6770eebee2078624c86130547b789368bbee6dbfdce18870
/home/travis/.cache/pip/http/9/1/b/e/5/91be50dfec7780a8f314a94ec95e858b35803fb9ac278014c4c2ae16
/home/travis/.cache/pip/http/9/9/7/5/3/99753e8ce382cb062c36550aaadcb68ab193195247397deee1dbd57f
/home/travis/.cache/pip/http/a/6/9/b/d/a6
[0m
[32;1m...
[0m
[32;1mchanges detected, packing new archive[0m
[32;1muploading archive[0m

travis_time:end:0951ff33:start=1469552336708980841,finish=1469552340229581977,duration=3520601136[0Ktravis_fold:end:cache.2[0K
Done. Your build exited with 1.
